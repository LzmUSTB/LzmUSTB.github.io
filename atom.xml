<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Distant Dreamer</title>
  
  <subtitle>No More Wasted Nights.</subtitle>
  <link href="https://lzmustb.github.io/atom.xml" rel="self"/>
  
  <link href="https://lzmustb.github.io/"/>
  <updated>2022-10-02T00:33:20.537Z</updated>
  <id>https://lzmustb.github.io/</id>
  
  <author>
    <name>Lzm</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dom-attributes</title>
    <link href="https://lzmustb.github.io/2022/10/02/Dom-attributes/"/>
    <id>https://lzmustb.github.io/2022/10/02/Dom-attributes/</id>
    <published>2022-10-02T00:31:47.000Z</published>
    <updated>2022-10-02T00:33:20.537Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">clientHeight     获取对象的高度，不计算任何边距、边框、滚动条，但包括该对象的补白。  </span><br><span class="line"></span><br><span class="line">clientLeft     获取    offsetLeft     属性和客户区域的实际左边之间的距离。</span><br><span class="line"></span><br><span class="line">clientTop     获取    offsetTop     属性和客户区域的实际顶端之间的距离。</span><br><span class="line"></span><br><span class="line">clientWidth     获取对象的宽度，不计算任何边距、边框、滚动条，但包括该对象的补白。</span><br><span class="line"></span><br><span class="line">offsetHeight     获取对象相对于版面或由父坐标    offsetParent     属性指定的父坐标的高度。</span><br><span class="line"></span><br><span class="line">offsetLeft     获取对象相对于版面或由    offsetParent     属性指定的父坐标的计算左侧位置。</span><br><span class="line"></span><br><span class="line">offsetParent     获取定义对象    offsetTop     和    offsetLeft     属性的容器对象的引用。</span><br><span class="line"></span><br><span class="line">offsetTop     获取对象相对于版面或由    offsetTop     属性指定的父坐标的计算顶端位置。</span><br><span class="line"></span><br><span class="line">offsetWidth     获取对象相对于版面或由父坐标    offsetParent     属性指定的父坐标的宽度。</span><br><span class="line"></span><br><span class="line">offsetX     设置或获取鼠标指针位置相对于触发事件的对象的    x     坐标。</span><br><span class="line"></span><br><span class="line">offsetY     设置或获取鼠标指针位置相对于触发事件的对象的    y     坐标。</span><br><span class="line"></span><br><span class="line">clientX,clientY   鼠标当前相对于网页的位置，当鼠标位于页面左上角时clientX=0, clientY=0</span><br><span class="line"></span><br><span class="line">screenX, screenY是相对于用户显示器的位置</span><br></pre></td></tr></table></div></figure><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">网页可见区域宽： document.body.clientWidth</span><br><span class="line"></span><br><span class="line">网页可见区域高： document.body.clientHeight</span><br><span class="line"></span><br><span class="line">网页可见区域宽： document.body.offsetWidth    (包括边线的宽)</span><br><span class="line"></span><br><span class="line">网页可见区域高： document.body.offsetHeight   (包括边线的宽)</span><br><span class="line"></span><br><span class="line">网页正文全文宽： document.body.scrollWidth</span><br><span class="line"></span><br><span class="line">网页正文全文高： document.body.scrollHeight</span><br><span class="line"></span><br><span class="line">网页被卷去的高： document.body.scrollTop</span><br><span class="line"></span><br><span class="line">网页被卷去的左： document.body.scrollLeft</span><br><span class="line"></span><br><span class="line">网页正文部分上： window.screenTop</span><br><span class="line"></span><br><span class="line">网页正文部分左： window.screenLeft</span><br><span class="line"></span><br><span class="line">屏幕分辨率的高： window.screen.height</span><br><span class="line"></span><br><span class="line">屏幕分辨率的宽： window.screen.width</span><br><span class="line"></span><br><span class="line">屏幕可用工作区高度： window.screen.availHeight</span><br><span class="line"></span><br><span class="line">屏幕可用工作区宽度：window.screen.availWidth</span><br></pre></td></tr></table></div></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;div class=&quot;table-container&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span cla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Vue路由</title>
    <link href="https://lzmustb.github.io/2022/09/27/Vue3-vue-router/"/>
    <id>https://lzmustb.github.io/2022/09/27/Vue3-vue-router/</id>
    <published>2022-09-27T12:50:55.000Z</published>
    <updated>2022-10-01T03:04:58.410Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Vue-router"   >          <a href="#Vue-router" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue-router" class="headerlink" title="Vue-router"></a>Vue-router</h1>      <blockquote><p>通过 Vue.js，我们已经用组件组成了我们的应用。当加入 Vue Router 时，我们需要做的就是将我们的组件映射到路由上，让 Vue Router 知道在哪里渲染它们。</p></blockquote><span id="more"></span>        <h2 id="安装"   >          <a href="#安装" class="heading-link"><i class="fas fa-link"></i></a><a href="#安装" class="headerlink" title="安装"></a>安装</h2>      <p>Vue3需要4.0以上版本的vue-router</p><figure class="highlight sh"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//在vue应用根目录中：</span><br><span class="line">npm install vue-router@4</span><br></pre></td></tr></table></div></figure>        <h2 id="配置路由"   >          <a href="#配置路由" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h2>              <h3 id="x2F-router-x2F-index-js"   >          <a href="#x2F-router-x2F-index-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#x2F-router-x2F-index-js" class="headerlink" title=".&#x2F;router&#x2F;index.js"></a>.&#x2F;router&#x2F;index.js</h3>      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter,createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes=[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">()=&gt;</span><span class="title function_">import</span>(<span class="string">&#x27;../views/Main.vue&#x27;</span>),</span><br><span class="line">        <span class="attr">redirect</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                 <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">                 <span class="attr">name</span>:<span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">                 <span class="attr">component</span>: <span class="function">()=&gt;</span><span class="title function_">import</span>(<span class="string">&#x27;../views/home/Home.vue&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">//创建路由实例</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></div></figure>        <h3 id="x2F-main-js"   >          <a href="#x2F-main-js" class="heading-link"><i class="fas fa-link"></i></a><a href="#x2F-main-js" class="headerlink" title=".&#x2F;main.js"></a>.&#x2F;main.js</h3>      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">.<span class="title function_">use</span>(router);</span><br><span class="line">.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></div></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Vue-router&quot;   &gt;
          &lt;a href=&quot;#Vue-router&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Vue-router&quot; class=&quot;headerlink&quot; title=&quot;Vue-router&quot;&gt;&lt;/a&gt;Vue-router&lt;/h1&gt;
      &lt;blockquote&gt;
&lt;p&gt;通过 Vue.js，我们已经用组件组成了我们的应用。当加入 Vue Router 时，我们需要做的就是将我们的组件映射到路由上，让 Vue Router 知道在哪里渲染它们。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="前端" scheme="https://lzmustb.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Vue-组合式API</title>
    <link href="https://lzmustb.github.io/2022/09/25/Vue3-Composition-API/"/>
    <id>https://lzmustb.github.io/2022/09/25/Vue3-Composition-API/</id>
    <published>2022-09-25T14:03:42.000Z</published>
    <updated>2022-09-26T08:21:03.806Z</updated>
    
    <content type="html"><![CDATA[<hr><p>使用函数而不是声明选项的方式书写Vue组件</p><p>包括响应式API，生命周期钩子，依赖注入</p><hr><span id="more"></span>        <h2 id="组合式API的优势"   >          <a href="#组合式API的优势" class="heading-link"><i class="fas fa-link"></i></a><a href="#组合式API的优势" class="headerlink" title="组合式API的优势"></a>组合式API的优势</h2>      <p>更灵活地组织代码，让逻辑相关的代码能够集中在一处</p><blockquote><p>组合式 API 不像选项式 API 那样会手把手教你该把代码放在哪里。但反过来，它却让你可以像编写普通的 JavaScript 那样来编写组件代码。这意味着<strong>你能够，并且应该在写组合式 API 的代码时也运用上所有普通 JavaScript 代码组织的最佳实践</strong>。如果你可以编写组织良好的 JavaScript，你也应该有能力编写组织良好的组合式 API 代码。</p></blockquote><hr>        <h2 id="响应式API"   >          <a href="#响应式API" class="heading-link"><i class="fas fa-link"></i></a><a href="#响应式API" class="headerlink" title="响应式API"></a>响应式API</h2>              <h3 id="理解响应性"   >          <a href="#理解响应性" class="heading-link"><i class="fas fa-link"></i></a><a href="#理解响应性" class="headerlink" title="理解响应性"></a>理解响应性</h3>      <p><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/extras/reactivity-in-depth.html#what-is-reactivity" >Vue的解释</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p><blockquote><p>响应性是可以声明式地处理变化的编程范式，使一个对象发生变化时，与其相关联的对象也能随之发生变化。</p></blockquote><p>响应式对象： Vue 能够跟踪，访问，修改其属性的对象，实际是JavaScript Proxy。</p>        <h3 id="定义响应式变量-reactive"   >          <a href="#定义响应式变量-reactive" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义响应式变量-reactive" class="headerlink" title="定义响应式变量-reactive()"></a>定义响应式变量-reactive()</h3>      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;)</span><br></pre></td></tr></table></div></figure>        <h4 id="reactive-规则"   >          <a href="#reactive-规则" class="heading-link"><i class="fas fa-link"></i></a><a href="#reactive-规则" class="headerlink" title="reactive()规则"></a>reactive()规则</h4>      <ul><li><p>Proxy和原始对象并非全等，因此使用Vue 的响应式系统应<strong>仅使用你声明对象的代理版本</strong>。</p></li><li><p>已存在的代理对象传入<code>reactive()</code>会返回该代理本身。</p></li><li><p>同一个对象传入<code>reactive()</code>总是会返回同一个代理对象。</p></li><li><p><code>reactive()</code>对原始数据类型无效。</p></li><li><p>将<code>reactive()</code>响应式对象解构或传入函数时，失去响应性连接。</p></li><li><p>当一个变量多次接受<code>reactive()</code>返回的代理对象，旧的响应式连接会丢失。</p></li></ul><figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;)</span><br><span class="line"><span class="comment">// 上面的 (&#123; count: 0 &#125;) 将不再被追踪</span></span><br><span class="line">state = <span class="title function_">reactive</span>(&#123; <span class="attr">count</span>: <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></div></figure>        <h3 id="定义响应式变量-ref"   >          <a href="#定义响应式变量-ref" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义响应式变量-ref" class="headerlink" title="定义响应式变量-ref()"></a>定义响应式变量-ref()</h3>      <p><code>ref()</code>可以创建任何值类型的响应式，且传给函数或是从一般对象上被解构时，不会丢失响应性，可用于将逻辑提取到 <span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/reusability/composables.html" >组合函数</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 中</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const count = ref(0)</span><br><span class="line">const object = &#123;foo:ref(1)&#125;</span><br><span class="line">//ref()将创建一个带value属性的对象</span><br><span class="line">//count=&#123;value:0&#125;</span><br><span class="line">//count.value=0</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure><p>当ref是模板渲染上下文的顶层属性或文本插值计算的最终值时将自动解包</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- ↓解包，结果为：0 --&gt;</span><br><span class="line">&#123;&#123; count &#125;&#125;</span><br><span class="line">&lt;!-- ↓解包，结果为：1 --&gt;</span><br><span class="line">&#123;&#123;object.foo&#125;&#125;</span><br><span class="line">&lt;!-- ↓不解包，结果为：[object Object]1 --&gt;</span><br><span class="line">&#123;&#123;object.foo+1&#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></div></figure><p><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html#ref-unwrapping-in-reactive-objects" >ref在响应式对象中的解包</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>（略）</p>        <h3 id="计算属性"   >          <a href="#计算属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3>      <p><code>computed()</code>方法接收一个getter函数，并返回一个计算属性<strong>ref</strong>，与一般ref用法类似。计算属性会自动追踪响应式依赖并随之变化。</p><figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setup内</span></span><br><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">let</span> number = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> sign = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> number&gt;<span class="number">0</span>?<span class="string">&#x27;plus&#x27;</span>:<span class="string">&#x27;minus&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></div></figure><p>与直接调用方法相比，计算属性会有<strong>缓存</strong>功能，只要其响应式依赖不改变，计算属性就会立即返回先前的结果而不重复计算。<br>&amp;emsp;&amp;emsp;<font color='#aaa'>※计算函数不应进行计算以外的作用(如更改DOM或做异步请求)</font></p><hr>        <h2 id="生命周期钩子"   >          <a href="#生命周期钩子" class="heading-link"><i class="fas fa-link"></i></a><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h2>      <p>以下API全部在<code>setup()</code>阶段被调用</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onActivated, onDeactivated &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">onActivated(() =&gt; &#123;</span><br><span class="line">  // 调用时机为首次挂载</span><br><span class="line">  // 以及每次从缓存中被重新插入时</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">onDeactivated(() =&gt; &#123;</span><br><span class="line">  // 在从 DOM 上移除、进入缓存</span><br><span class="line">  // 以及组件卸载时调用</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure><hr>        <h2 id="依赖注入"   >          <a href="#依赖注入" class="heading-link"><i class="fas fa-link"></i></a><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h2>      <hr>        <h2 id="使用组合式API"   >          <a href="#使用组合式API" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用组合式API" class="headerlink" title="使用组合式API"></a>使用组合式API</h2>              <h3 id="setup"   >          <a href="#setup" class="heading-link"><i class="fas fa-link"></i></a><a href="#setup" class="headerlink" title="setup()"></a>setup()</h3>      <p><code>setup()</code> 钩子是在组件中使用组合式 API 的入口，通常只在以下情况下使用：</p><ol><li>需要在非单文件组件中使用组合式 API 时。</li><li>需要在基于选项式 API 的组件中集成基于组合式 API 的代码时。</li></ol><p><strong>其他情况下，都应优先使用&lt;script setup&gt;语法。</strong></p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    props:&#123;    </span><br><span class="line">    &#125;,</span><br><span class="line">    setup(props,context) &#123;</span><br><span class="line">    const count = ref(0)</span><br><span class="line">    // 通过return返回的变量会暴露给模板和其他的选项式API钩子</span><br><span class="line">    return &#123;</span><br><span class="line">      count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></div></figure><blockquote><p>在模板中访问从 <code>setup</code> 返回的 <span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/api/reactivity-core.html#ref" >ref</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> 时，它会<span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html#deep-reactivity" >自动浅层解包</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>，因此你无须再在模板中为它写 <code>.value</code>。当通过 <code>this</code> 访问时也会同样如此解包。<br><code>setup()</code> 自身并不含对组件实例的访问权，即在 <code>setup()</code> 中访问 <code>this</code> 会是 <code>undefined</code>。你可以在选项式 API 中访问组合式 API 暴露的值，但反过来则不行。</p></blockquote>        <h3 id="lt-script-setup-gt"   >          <a href="#lt-script-setup-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#lt-script-setup-gt" class="headerlink" title="&lt;script setup&gt;"></a>&lt;script setup&gt;</h3>      <ul><li><code>defineProps()</code>：声明</li></ul>]]></content>
    
    
    <summary type="html">&lt;hr&gt;
&lt;p&gt;使用函数而不是声明选项的方式书写Vue组件&lt;/p&gt;
&lt;p&gt;包括响应式API，生命周期钩子，依赖注入&lt;/p&gt;
&lt;hr&gt;</summary>
    
    
    
    <category term="前端" scheme="https://lzmustb.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Vue指令</title>
    <link href="https://lzmustb.github.io/2022/09/25/Vue3-Commands/"/>
    <id>https://lzmustb.github.io/2022/09/25/Vue3-Commands/</id>
    <published>2022-09-25T14:03:42.000Z</published>
    <updated>2022-09-25T06:56:50.685Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Vuecommand"   >          <a href="#Vuecommand" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vuecommand" class="headerlink" title="Vuecommand"></a>Vuecommand</h1>      <span id="more"></span><hr>        <h2 id="v-text"   >          <a href="#v-text" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h2>      <p>更新文本内容</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;span v-text=&quot;msg&quot;&gt;&lt;/span&gt;</span><br><span class="line">&lt;!-- 等同于 --&gt;</span><br><span class="line">&lt;span&gt;&#123;&#123;msg&#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></div></figure>        <h2 id="v-show"   >          <a href="#v-show" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h2>      <p>设置内联<code>display</code>属性</p>        <h2 id="v-if-x2F-v-else-if-x2F-v-else"   >          <a href="#v-if-x2F-v-else-if-x2F-v-else" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-if-x2F-v-else-if-x2F-v-else" class="headerlink" title="v-if&#x2F;v-else-if&#x2F;v-else"></a>v-if&#x2F;v-else-if&#x2F;v-else</h2>      <p>可用于<code>&lt;template&gt;</code>表示仅包含文本或多个元素的条件块。</p><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span></span><br><span class="line">  A</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span></span><br><span class="line">  B</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span></span><br><span class="line">  C</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  Not A/B/C</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h2 id="v-for"   >          <a href="#v-for" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h2>      <p>进行列表渲染</p>        <h2 id="v-on"   >          <a href="#v-on" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h2>              <h2 id="v-bind"   >          <a href="#v-bind" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h2>      ]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Vuecommand&quot;   &gt;
          &lt;a href=&quot;#Vuecommand&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Vuecommand&quot; class=&quot;headerlink&quot; title=&quot;Vuecommand&quot;&gt;&lt;/a&gt;Vuecommand&lt;/h1&gt;</summary>
    
    
    
    <category term="前端" scheme="https://lzmustb.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Vue单文件组件</title>
    <link href="https://lzmustb.github.io/2022/09/25/Vue3-Single-File-Component/"/>
    <id>https://lzmustb.github.io/2022/09/25/Vue3-Single-File-Component/</id>
    <published>2022-09-25T14:03:42.000Z</published>
    <updated>2022-09-27T01:13:01.007Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Single-File-Component"   >          <a href="#Single-File-Component" class="heading-link"><i class="fas fa-link"></i></a><a href="#Single-File-Component" class="headerlink" title="Single-File Component"></a>Single-File Component</h1>      <hr><blockquote><p><strong>前端开发的关注点不是完全基于文件类型分离的</strong>。在现代的 UI 开发中，我们发现与其将代码库划分为三个巨大的层，相互交织在一起，不如将它们划分为松散耦合的组件，再按需组合起来。在一个组件中，其模板、逻辑和样式本就是有内在联系的、是耦合的，将它们放在一起，实际上使组件更有内聚性和可维护性。</p></blockquote><span id="more"></span><p>将一个Vue组件的模板(html)，逻辑(javascript)，样式(css)封装在单个文件<code>*.vue</code>中。</p><p>每个文件都由三种顶层语言模块构成：<code>&lt;template&gt;</code> <code>&lt;style&gt;</code> <code>&lt;script&gt;</code> </p><hr>        <h2 id="lt-template-gt"   >          <a href="#lt-template-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#lt-template-gt" class="headerlink" title="&lt;template&gt;"></a>&lt;template&gt;</h2>      <ul><li>每个 <code>*.vue</code> 文件最多包含一个<code>&lt;template&gt;</code>，模块中可以</li></ul><hr>        <h2 id="lt-style-gt"   >          <a href="#lt-style-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#lt-style-gt" class="headerlink" title="&lt;style&gt;"></a>&lt;style&gt;</h2>      <ul><li>每个 <code>*.vue</code> 文件可以包含<strong>多个</strong> <code>&lt;style&gt;</code> 标签。</li></ul>        <h3 id="lt-style-scoped-gt"   >          <a href="#lt-style-scoped-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#lt-style-scoped-gt" class="headerlink" title="&lt;style scoped&gt;"></a>&lt;style scoped&gt;</h3>      <p>​带有<code>scoped</code>属性的style标签值会影响当前组件内的元素。</p><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.example</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span>&gt;</span>hi<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">-----↓↓↓通过 PostCSS 将内容转化↓↓↓-----</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.example</span><span class="selector-attr">[data-v-f3f3eg9]</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">data-v-f3f3eg9</span>&gt;</span>hi<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></div></figure><p>​※子组件的根元素只有<strong>一个</strong>时<font color=#aaa>(<code>&lt;template&gt;</code>内的最外层元素)</font>会附带父组件的<code>data-v-hash</code>，同时被父组件的样式和子组件的样式影响。<br>​<strong>当子组件和父组件有同名class的选择器时，父组件样式会覆盖子组件样式</strong>。<br>​子组件设置<code>inheritAttrs</code>为<code>false</code>，非<code>props</code>属性不会应用到子组件根元素上。但父组件使用标签选择器时，子组件样式依然被影响。</p>        <h4 id="选择器"   >          <a href="#选择器" class="heading-link"><i class="fas fa-link"></i></a><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h4>      <ul><li><code>:deep()</code></li><li><code>:slotted()</code></li><li><code>:global()</code></li><li><strong>小心递归组件中的后代选择器</strong>！对于一个使用了 <code>.a .b</code> 选择器的样式规则来说，如果匹配到 <code>.a</code> 的元素包含了一个递归的子组件，那么所有的在那个子组件中的 <code>.b</code> 都会匹配到这条样式规则。</li></ul>        <h3 id="lt-style-module-gt"   >          <a href="#lt-style-module-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#lt-style-module-gt" class="headerlink" title="&lt;style module&gt;"></a>&lt;style module&gt;</h3>      <p>编译为CSS Modules(<span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/api/sfc-css-features.html#css-modules" >暂略</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>)</p>        <h3 id="v-bind"   >          <a href="#v-bind" class="heading-link"><i class="fas fa-link"></i></a><a href="#v-bind" class="headerlink" title="v-bind()"></a>v-bind()</h3>      <figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.text</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="built_in">v-bind</span>(color);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></div></figure><p>自定义属性会通过内联样式的方式应用到组件的根元素上，并且在源值变更的时候响应式地更新</p>        <h3 id="预处理器"   >          <a href="#预处理器" class="heading-link"><i class="fas fa-link"></i></a><a href="#预处理器" class="headerlink" title="预处理器"></a>预处理器</h3>      <p><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/api/sfc-spec.html#pre-processors" >暂略</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p><hr>        <h2 id="lt-script-gt"   >          <a href="#lt-script-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#lt-script-gt" class="headerlink" title="&lt;script&gt;"></a>&lt;script&gt;</h2>      <ul><li>每个 <code>*.vue</code> 文件最多可以包含一个<code>&lt;script&gt;</code>和 <code>&lt;script setup&gt;</code></li></ul>        <h3 id="构成"   >          <a href="#构成" class="heading-link"><i class="fas fa-link"></i></a><a href="#构成" class="headerlink" title="构成"></a>构成</h3>      <figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 返回值会暴露给模板和其他的选项式 API 钩子</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      count</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">count</span>) <span class="comment">// 0</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h3 id="export"   >          <a href="#export" class="heading-link"><i class="fas fa-link"></i></a><a href="#export" class="headerlink" title="export"></a>export</h3>      <p><code>export</code>用于导出单文件组件的<strong>选项对象</strong>，以便在其他组件中用<code>import</code>引入。<code>export default</code>导出为一整个模块，<code>export</code>可以分别命名导出的模块。一个js中只能由一个<code>export default</code>，但可以有多个<code>export</code>。</p><p>main.js在构造根组件时，如果根组件包含其他子组件，那么Vue会通过引入的<strong>选项对象</strong>构造对应的组件。</p><hr>        <h2 id="组件使用"   >          <a href="#组件使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件使用" class="headerlink" title="组件使用"></a>组件使用</h2>              <h3 id="注册子组件"   >          <a href="#注册子组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#注册子组件" class="headerlink" title="注册子组件"></a>注册子组件</h3>      <figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//注册子组件，可在模板中任意使用</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">ChildComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./ChildComponent.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></div></figure><p>每个组件都是独立的实例，维护独立的属性。</p>        <h3 id="组件参数-Props"   >          <a href="#组件参数-Props" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件参数-Props" class="headerlink" title="组件参数-Props"></a>组件参数-Props</h3>      <ul><li>通过Props属性，子组件可以从父组件接收参数。</li><li>当使用对象形式声明props时，值为该prop预期类型的构造函数。该方法可以在prop传入错误类型时抛出警告。</li><li>可以用一个<code>const</code>变量取接收<code>defineProps()</code>返回的对象</li><li>所有prop都是可选的，除非声明<code>required:true</code></li><li>未传递的prop默认值为<code>undefined</code>或Boolean则为<code>false</code></li></ul><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--子组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">defineProps([&#x27;title&#x27;])</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    <span class="comment">&lt;!--或者--&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">defineProps(&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  title: String,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  propA: &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    type: Object,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    required: true</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    //自定义类型校验</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    validator(value)&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">      return &#123; message: &#x27;hello&#x27; &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">    &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">&#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;blog-post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--父组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">title</span>=<span class="string">&quot;Why Vue is so fun&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--也可通过v-bind传递变量--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:title</span>=<span class="string">&quot;post.title&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--批量传入Props(post对象包含所有props)--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">v-bind</span>=<span class="string">&quot;post&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure><p>所有的 props 都遵循着<strong>单向绑定</strong>原则，每次父组件更新后，所有的子组件中的 props 都会被更新到最新值</p><p><font color=#b00>※prop在子组件中是只读的，当你尝试修改时，vue会抛出警告</font></p><blockquote><p>当对象或数组作为 props 被传入时，虽然子组件无法更改 props 绑定，但仍然可以更改对象或数组内部的值。</p><p>这种更改的主要缺陷是它允许了子组件以某种不明显的方式影响父组件的状态，可能会使数据流在将来变得更难以理解。在大多数场景下，子组件应该<strong>抛出一个事件</strong>来通知父组件做出改变。</p></blockquote>        <h3 id="组件事件-Emits"   >          <a href="#组件事件-Emits" class="heading-link"><i class="fas fa-link"></i></a><a href="#组件事件-Emits" class="headerlink" title="组件事件-Emits"></a>组件事件-Emits</h3>      <ul><li>通过Emits属性，子组件可以从父组件接收事件，并且这些事件可从子组件抛出。</li></ul><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--子组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript">   </span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineEmits</span>([<span class="string">&#x27;enlarge-text&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;blog-post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;enlarge-text&#x27;)&quot;</span>&gt;</span>Enlarge text<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--父组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; fontSize : postFontSize +&#x27;em&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">title</span>=<span class="string">&quot;Why Vue is so fun&quot;</span> @<span class="attr">enlarge-text</span>=<span class="string">&quot;postFontSize += 0.1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h4 id="事件参数-amp-事件校验"   >          <a href="#事件参数-amp-事件校验" class="heading-link"><i class="fas fa-link"></i></a><a href="#事件参数-amp-事件校验" class="headerlink" title="事件参数&amp;事件校验"></a>事件参数&amp;事件校验</h4>      <p><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/components/events.html#event-arguments" >略</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h3 id="插槽-slot"   >          <a href="#插槽-slot" class="heading-link"><i class="fas fa-link"></i></a><a href="#插槽-slot" class="headerlink" title="插槽-slot"></a>插槽-slot</h3>      <p>通过slot，父组件可以向子组件传递元素，从而在子组件中完成渲染。</p><p>※插槽的内容无法访问到子组件的状态</p><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--父组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AlertBox</span>&gt;</span></span><br><span class="line">  Something bad happened.</span><br><span class="line"><span class="tag">&lt;/<span class="name">AlertBox</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--子组件中,slot部分会被父组件传入的元素取代--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>可在此填入默认内容<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h4 id="具名插槽"   >          <a href="#具名插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h4>      <p>带 <code>name</code> 属性的插槽被称为具名插槽 (named slots)，未提供<code>name</code>则隐式地命名为“default”。</p><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--子组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--父组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--或简写--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- header 插槽的内容放这里 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BaseLayout</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h4 id="作用域插槽"   >          <a href="#作用域插槽" class="heading-link"><i class="fas fa-link"></i></a><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h4>      <p><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/components/slots.html#scoped-slots" >略</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h3 id="动态切换组件"   >          <a href="#动态切换组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#动态切换组件" class="headerlink" title="动态切换组件"></a>动态切换组件</h3>      <p>通过<code>component</code>元素和<code>is</code>属性可以实现动态组件，<code>is</code>的值可以是<strong>被注册的组件名</strong>或<strong>导入的组件对象</strong>。一般情况下，被切换的组件会被销毁。在下次切换回该组件时，会创建一个初始状态的新实例。</p><p>通过<code>&lt;KeepAlive&gt;</code>内置组件包装动态组件，可以缓存被切换的组件。</p><p>可选属性：</p><ul><li><code>max</code>：限制被缓存的数量</li><li><code>include/exclude</code>：可以筛选需要缓存的组件，传入正则表达式或数组，匹配组件的<code>name</code></li></ul><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">KeepAlive</span> <span class="attr">:max</span>=<span class="string">&quot;3&quot;</span> <span class="attr">:include</span>=<span class="string">&quot;/a|b/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;tabs[currentTab]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">KeepAlive</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h3 id="透传属性"   >          <a href="#透传属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#透传属性" class="headerlink" title="透传属性"></a>透传属性</h3>      <p>当一个属性传递给子组件时，若该属性未被子组件声明为<code>props</code>,<code>emits</code>,<code>v-on</code>事件监听器，则称为<strong>透传attribute</strong>。</p><ul><li><p>当子组件<strong>只含单个根元素</strong>，则透传属性会被自动添加到该元素上，并和元素上原有的属性合并。</p></li><li><p>如果子组件A中是另一个组件B，透传属性会传递给组件B</p></li><li><p>在组件<code>export default</code>中设置<code>inheritAttrs: false</code>可以禁用组件透传。</p></li><li><p>在设为禁用后，在子组件中可以通过<code>$attrs</code><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/components/attrs.html#disabling-attribute-inheritance" >访问</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>所有透传属性，并通过<code>v-bind=&quot;$attrs&quot;</code>将透传属性绑定到任意元素上。</p></li></ul><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--子组件只含一个button元素--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--父组件中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MyButton</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--最终渲染--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> </span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;child father&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span></span><br><span class="line">click me</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></div></figure>        <h4 id="在Js中访问attrs"   >          <a href="#在Js中访问attrs" class="heading-link"><i class="fas fa-link"></i></a><a href="#在Js中访问attrs" class="headerlink" title="在Js中访问attrs"></a>在Js中访问attrs</h4>      <p>以下<code>attrs</code>为非响应式。</p><figure class="highlight html"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useAttrs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> attrs = <span class="title function_">useAttrs</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params">props, ctx</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 透传 attribute 被暴露为 ctx.attrs</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(ctx.<span class="property">attrs</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></div></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Single-File-Component&quot;   &gt;
          &lt;a href=&quot;#Single-File-Component&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Single-File-Component&quot; class=&quot;headerlink&quot; title=&quot;Single-File Component&quot;&gt;&lt;/a&gt;Single-File Component&lt;/h1&gt;
      &lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;前端开发的关注点不是完全基于文件类型分离的&lt;/strong&gt;。在现代的 UI 开发中，我们发现与其将代码库划分为三个巨大的层，相互交织在一起，不如将它们划分为松散耦合的组件，再按需组合起来。在一个组件中，其模板、逻辑和样式本就是有内在联系的、是耦合的，将它们放在一起，实际上使组件更有内聚性和可维护性。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="前端" scheme="https://lzmustb.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Vue3</title>
    <link href="https://lzmustb.github.io/2022/09/25/Vue3-conclusion/"/>
    <id>https://lzmustb.github.io/2022/09/25/Vue3-conclusion/</id>
    <published>2022-09-25T14:03:42.000Z</published>
    <updated>2022-10-01T01:22:20.946Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Vue3"   >          <a href="#Vue3" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h1>      <hr>        <h2 id="概念"   >          <a href="#概念" class="heading-link"><i class="fas fa-link"></i></a><a href="#概念" class="headerlink" title="概念"></a>概念</h2>      <ul><li>指令：<code>v-for</code>,<code>v-model</code>,<code>v-bind</code></li></ul><span id="more"></span>        <h2 id="step-0-构建"   >          <a href="#step-0-构建" class="heading-link"><i class="fas fa-link"></i></a><a href="#step-0-构建" class="headerlink" title="step_0_构建"></a>step_0_构建</h2>              <h3 id="Vite脚手架"   >          <a href="#Vite脚手架" class="heading-link"><i class="fas fa-link"></i></a><a href="#Vite脚手架" class="headerlink" title="Vite脚手架"></a>Vite脚手架</h3>      <p>通过脚手架，可以快速构建项目预设，包含<code>main.js</code>，<code>App.vue</code>以及<code>/src</code>文件夹等。</p><figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装vite脚手架并构建预设vue项目</span></span><br><span class="line">yarn[或cnpm] create vite my-vue-app --template vue</span><br><span class="line"></span><br><span class="line"><span class="comment">//进入项目根目录，安装</span></span><br><span class="line">cd my-vue-app</span><br><span class="line">yarn install</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建本地服务器，进入开发模式</span></span><br><span class="line">yarn dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//进入根目录，安装element-Plus</span></span><br><span class="line">cnpm install element-plus --save</span><br></pre></td></tr></table></div></figure>        <h3 id="elementPlus引入"   >          <a href="#elementPlus引入" class="heading-link"><i class="fas fa-link"></i></a><a href="#elementPlus引入" class="headerlink" title="elementPlus引入"></a>elementPlus引入</h3>      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安装插件</span></span><br><span class="line">cnpm install -D unplugin-vue-components unplugin-auto-<span class="keyword">import</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//插入到vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></div></figure><p>完整引入Icon</p><figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app=<span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">  app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="step-1-创建应用实例"   >          <a href="#step-1-创建应用实例" class="heading-link"><i class="fas fa-link"></i></a><a href="#step-1-创建应用实例" class="headerlink" title="step_1_创建应用实例"></a>step_1_创建应用实例</h2>      <figure class="highlight javascript"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main.<span class="property">js</span><span class="comment">//入口文件</span></span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">1.</span>创建应用实例--&gt;</span><br><span class="line"><span class="comment">//导入createApp，单文件根组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//createApp(根组件,根组件Props[可选])</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="comment">/*---外部导入↑或↓内联---*/</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span><br><span class="line">    <span class="comment">/*内联根组件*/</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">2.</span>将应用实例挂载在一个容器元素中--&gt;</span><br><span class="line"><span class="comment">//mount(DOM元素或CSS选择器)</span></span><br><span class="line"><span class="comment">//每个应用实例仅能调用一次mount()</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="comment">/*---CSS选择器↑或↓DOM元素---*/</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">firstChild</span>)</span><br></pre></td></tr></table></div></figure><p>App相关方法，属性</p><ul><li><code>unmount()</code>：卸载一个已挂载的应用</li><li><a href="https://cn.vuejs.org/api/application.html#app-provide"><code>provide()</code></a>：提供一个值，在应用中的所有后代组件中注入使用。</li><li><a href="https://cn.vuejs.org/api/application.html#app-component"><code>component()</code></a>：注册组件</li><li><a href="https://cn.vuejs.org/api/application.html#app-directive"><code>directive()</code></a>：注册指令</li><li><a href="https://cn.vuejs.org/api/application.html#app-use"><code>use()</code></a>：安装一个插件</li><li><code>version</code>：当前应用所使用的 Vue 版本号</li><li><a href="https://cn.vuejs.org/api/application.html#app-config"><code>config</code></a>：对这个应用的配置设定</li><li><a href="https://cn.vuejs.org/api/application.html#app-config-globalproperties"><code>config.globalProperties</code></a>：注册能够被应用内所有组件访问的全局属性的对象</li></ul>        <h2 id="step2-组件-component"   >          <a href="#step2-组件-component" class="heading-link"><i class="fas fa-link"></i></a><a href="#step2-组件-component" class="headerlink" title="step2_组件(component)"></a>step2_组件(component)</h2>      <p>命名建议：PascalCase(所有首字母大写)</p>        <h3 id="创建组件"   >          <a href="#创建组件" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h3>              <h2 id="step3-测试"   >          <a href="#step3-测试" class="heading-link"><i class="fas fa-link"></i></a><a href="#step3-测试" class="headerlink" title="step3_测试"></a>step3_测试</h2>              <h3 id="单元测试"   >          <a href="#单元测试" class="heading-link"><i class="fas fa-link"></i></a><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h3>      <p><span class="exturl"><a class="exturl__link"   href="https://cn.vuejs.org/guide/scaling-up/testing.html#unit-testing" >单元测试</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>侧重于逻辑上的正确性，只关注应用整体功能的一小部分。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Vue3&quot;   &gt;
          &lt;a href=&quot;#Vue3&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Vue3&quot; class=&quot;headerlink&quot; title=&quot;Vue3&quot;&gt;&lt;/a&gt;Vue3&lt;/h1&gt;
      &lt;hr&gt;

        &lt;h2 id=&quot;概念&quot;   &gt;
          &lt;a href=&quot;#概念&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#概念&quot; class=&quot;headerlink&quot; title=&quot;概念&quot;&gt;&lt;/a&gt;概念&lt;/h2&gt;
      &lt;ul&gt;
&lt;li&gt;指令：&lt;code&gt;v-for&lt;/code&gt;,&lt;code&gt;v-model&lt;/code&gt;,&lt;code&gt;v-bind&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="前端" scheme="https://lzmustb.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Effect</title>
    <link href="https://lzmustb.github.io/2022/05/31/my-forge-learning-effect/"/>
    <id>https://lzmustb.github.io/2022/05/31/my-forge-learning-effect/</id>
    <published>2022-05-31T06:56:43.000Z</published>
    <updated>2022-05-31T08:41:03.308Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Effect"   >          <a href="#Effect" class="heading-link"><i class="fas fa-link"></i></a><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h1>              <h2 id="注册"   >          <a href="#注册" class="heading-link"><i class="fas fa-link"></i></a><a href="#注册" class="headerlink" title="注册"></a>注册</h2>      <p>与item大致相同</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建注册器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DeferredRegister&lt;MobEffect&gt; MOB_EFFECTS=DeferredRegister.create(ForgeRegistries.MOB_EFFECTS, Deathspiral.MOD_ID);</span><br><span class="line"><span class="comment">//注册Custom_Effect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RegistryObject&lt;MobEffect&gt; Custom_Effect=MOB_EFFECTS.register(<span class="string">&quot;custom_effect&quot;</span>,()-&gt;<span class="keyword">new</span> <span class="title class_">CustomEffect</span>());</span><br></pre></td></tr></table></div></figure>        <h2 id="自定义效果类"   >          <a href="#自定义效果类" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义效果类" class="headerlink" title="自定义效果类"></a>自定义效果类</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VigilanceEffect</span> <span class="keyword">extends</span> <span class="title class_">MobEffect</span> <span class="keyword">implements</span> <span class="title class_">IForgeMobEffect</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">VigilanceEffect</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(MobEffectCategory.BENEFICIAL,<span class="number">0</span>);</span><br><span class="line">    addAttributeModifier(Attributes.MOVEMENT_SPEED,<span class="string">&quot;UUID&quot;</span>,<span class="number">0.1F</span>, AttributeModifier.Operation.MULTIPLY_TOTAL);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//应用的效果</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">applyEffectTick</span><span class="params">(LivingEntity entity, <span class="type">int</span> amplifier)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!entity.level.isClientSide())&#123;</span><br><span class="line">            <span class="keyword">if</span>(entity <span class="keyword">instanceof</span> Player)&#123;</span><br><span class="line">                Player player=(Player)entity;</span><br><span class="line">                player.sendMessage(<span class="keyword">new</span> <span class="title class_">TranslatableComponent</span>(<span class="string">&quot;test_message&quot;</span>),player.getUUID());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//每隔多久应用一次效果(如果为20，就代表每隔20ticks即1秒)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDurationEffectTick</span><span class="params">(<span class="type">int</span> remainingTicks, <span class="type">int</span> level)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> remainingTicks%<span class="number">20</span>==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p><span class="exturl"><a class="exturl__link"   href="https://minecraft.fandom.com/zh/wiki/%E5%B1%9E%E6%80%A7" >AttributeModifier相关资料</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>]]></content>
    
    
      
      
    <summary type="html">
        &lt;h1 id=&quot;Effect&quot;   &gt;
          &lt;a href=&quot;#Effect&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Effect&quot; class=&quot;header</summary>
      
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Blocks-Entity</title>
    <link href="https://lzmustb.github.io/2022/05/30/my-forge-learning-entity/"/>
    <id>https://lzmustb.github.io/2022/05/30/my-forge-learning-entity/</id>
    <published>2022-05-30T05:26:45.000Z</published>
    <updated>2022-07-02T01:27:58.276Z</updated>
    
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Sounds</title>
    <link href="https://lzmustb.github.io/2022/05/29/my-forge-learning-sounds/"/>
    <id>https://lzmustb.github.io/2022/05/29/my-forge-learning-sounds/</id>
    <published>2022-05-29T12:19:38.000Z</published>
    <updated>2022-05-29T12:20:08.102Z</updated>
    
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-粒子效果</title>
    <link href="https://lzmustb.github.io/2022/05/19/my-forge-learning-particles/"/>
    <id>https://lzmustb.github.io/2022/05/19/my-forge-learning-particles/</id>
    <published>2022-05-19T00:49:38.000Z</published>
    <updated>2022-05-19T03:25:22.005Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Particles"   >          <a href="#Particles" class="heading-link"><i class="fas fa-link"></i></a><a href="#Particles" class="headerlink" title="Particles"></a>Particles</h1>      <span id="more"></span>        <h2 id="创建粒子效果"   >          <a href="#创建粒子效果" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建粒子效果" class="headerlink" title="创建粒子效果"></a>创建粒子效果</h2>      <p>Particles的实现包含了客户端限定的类和通用的类。客户端限定的类用于展现粒子效果，通用的类用于同步数据等</p><div class="table-container"><table><thead><tr><th>Class</th><th align="left">Side</th><th>描述</th></tr></thead><tbody><tr><td>ParticleType</td><td align="left">BOTH</td><td>用于注册</td></tr><tr><td>ParticleOptions</td><td align="left">BOTH</td><td>用于同步信息</td></tr><tr><td>ParticleProvider</td><td align="left">CLIENT</td><td>用于构造粒子</td></tr><tr><td>Particle</td><td align="left">CLIENT</td><td>粒子的渲染逻辑</td></tr></tbody></table></div>        <h2 id="ParticleType"   >          <a href="#ParticleType" class="heading-link"><i class="fas fa-link"></i></a><a href="#ParticleType" class="headerlink" title="ParticleType"></a>ParticleType</h2>      <p><code>ParticleType</code>是决定粒子种类，并为客户端和服务器提供参考的<code>RegistryObject</code>，因此，所有的<code>ParticleType</code>须被注册。<br>每个<code>ParticleType</code>接收两个参数：<br><code>overrideLimiter</code>决定了粒子是否无论远近都渲染<br><code>ParticleOptions$Deserializer</code>读取客户端的<code>ParticleOption</code><br><code>ParticleType</code>是抽象类，其<code>#codec</code>方法须被重写。</p><p>在大多数情况下，粒子数据不需要发送到客户端。对于这些实例，创建一个<code>SimpleParticleType</code>实例更加容易。</p>        <h2 id="TextureSheetParticle"   >          <a href="#TextureSheetParticle" class="heading-link"><i class="fas fa-link"></i></a><a href="#TextureSheetParticle" class="headerlink" title="TextureSheetParticle"></a>TextureSheetParticle</h2>      <p>实际自定义Particle时，可继承该类</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomParticle</span> <span class="keyword">extends</span> <span class="title class_">TextureSheetParticle</span>&#123;</span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="keyword">protected</span> <span class="title function_">CustomParticle</span><span class="params">(ClientLevel level,<span class="type">double</span> xCoord,<span class="type">double</span> yCoord,<span class="type">double</span> zCoord,SpriteSet spriteSet,<span class="type">double</span> xd,<span class="type">double</span> yd,<span class="type">double</span> zd)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>(level,xCoord,yCoord,zCoord,xd,yd,zd);</span><br><span class="line">    <span class="built_in">this</span>.friction=<span class="number">0.8F</span>;</span><br><span class="line">    <span class="built_in">this</span>.xd=xd;</span><br><span class="line">    <span class="built_in">this</span>.yd=yd;</span><br><span class="line">    <span class="built_in">this</span>.zd=zd;</span><br><span class="line">    <span class="built_in">this</span>.qu</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Particles&quot;   &gt;
          &lt;a href=&quot;#Particles&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Particles&quot; class=&quot;headerlink&quot; title=&quot;Particles&quot;&gt;&lt;/a&gt;Particles&lt;/h1&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-data</title>
    <link href="https://lzmustb.github.io/2022/05/17/my-forge-learning-data/"/>
    <id>https://lzmustb.github.io/2022/05/17/my-forge-learning-data/</id>
    <published>2022-05-17T06:20:00.000Z</published>
    <updated>2022-06-03T14:57:23.174Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Data"   >          <a href="#Data" class="heading-link"><i class="fas fa-link"></i></a><a href="#Data" class="headerlink" title="Data"></a>Data</h1>      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">resources</span><br><span class="line">└── data</span><br><span class="line">    └── MOD_ID</span><br><span class="line">        ├── recipes</span><br><span class="line">        ├── tags</span><br><span class="line">        ├── structures</span><br><span class="line">        ├── advancements</span><br><span class="line">        └── loot_tables</span><br></pre></td></tr></table></div></figure><p>在<code>Gradle:net.minecraft:client:extra:版本号</code>中可以看到原版的data文件夹</p><span id="more"></span>        <h2 id="recipes-合成表"   >          <a href="#recipes-合成表" class="heading-link"><i class="fas fa-link"></i></a><a href="#recipes-合成表" class="headerlink" title="recipes-合成表"></a>recipes-合成表</h2>      <figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//arrow.json 箭的合成配方</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:crafting_shaped&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pattern&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;X&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;#&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;Y&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;#&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:stick&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;X&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:flint&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Y&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:feather&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;minecraft:arrow&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure><p><code>type</code>：</p><ul><li><code>minecraft:blasting</code></li><li><code>minecraft:crafting_shaped</code></li><li><code>minecraft:smelting</code></li><li><code>minecraft:crafting_shapeless</code></li><li><code>minecraft:stonecutting</code></li><li><code>minecraft:smoking</code></li><li><code>minecraft:crafting_special_mapcloning</code></li><li><code>minecraft:smithing</code></li><li><code>minecraft:crafting_special_repairitem</code></li><li><code>minecraft:campfire_cooking</code></li></ul>        <h2 id="loot-table-战利品表"   >          <a href="#loot-table-战利品表" class="heading-link"><i class="fas fa-link"></i></a><a href="#loot-table-战利品表" class="headerlink" title="loot_table-战利品表"></a>loot_table-战利品表</h2>              <h2 id="tags-标签"   >          <a href="#tags-标签" class="heading-link"><i class="fas fa-link"></i></a><a href="#tags-标签" class="headerlink" title="tags-标签"></a>tags-标签</h2>              <h2 id="NBT-Data"   >          <a href="#NBT-Data" class="heading-link"><i class="fas fa-link"></i></a><a href="#NBT-Data" class="headerlink" title="NBT Data"></a>NBT Data</h2>      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ItemStack.hasTag()</span><br><span class="line">ItemStack.setTag(new CompoundTag())</span><br><span class="line">ItemStack.getTag().getString(&quot;key&quot;)</span><br><span class="line"></span><br><span class="line">CompoundTag.putString(&quot;key&quot;,&quot;value&quot;)</span><br></pre></td></tr></table></div></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Data&quot;   &gt;
          &lt;a href=&quot;#Data&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Data&quot; class=&quot;headerlink&quot; title=&quot;Data&quot;&gt;&lt;/a&gt;Data&lt;/h1&gt;
      &lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;div class=&quot;table-container&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;resources&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;└── data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    └── MOD_ID&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ├── recipes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ├── tags&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ├── structures&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ├── advancements&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        └── loot_tables&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;
&lt;p&gt;在&lt;code&gt;Gradle:net.minecraft:client:extra:版本号&lt;/code&gt;中可以看到原版的data文件夹&lt;/p&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-player</title>
    <link href="https://lzmustb.github.io/2022/05/17/my-forge-learning-player&amp;world/"/>
    <id>https://lzmustb.github.io/2022/05/17/my-forge-learning-player&amp;world/</id>
    <published>2022-05-17T05:42:23.000Z</published>
    <updated>2022-06-03T14:50:46.359Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Player"   >          <a href="#Player" class="heading-link"><i class="fas fa-link"></i></a><a href="#Player" class="headerlink" title="Player"></a>Player</h1>      <span id="more"></span>        <h2 id="常用方法"   >          <a href="#常用方法" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasEffect</span><span class="params">(MobEffect effect)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.activeEffects.containsKey(effect);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ItemStack <span class="title function_">getItemInHand</span><span class="params">(InteractionHand hand)</span>&#123;</span><br><span class="line">    <span class="comment">//返回玩家当前手中的道具</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历玩家的物品栏</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;player.getInventory().getContainerSize();i++)&#123;</span><br><span class="line">    ItemStack currentStack=player.getInventory().getItem(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="向玩家的对话框发送消息"   >          <a href="#向玩家的对话框发送消息" class="heading-link"><i class="fas fa-link"></i></a><a href="#向玩家的对话框发送消息" class="headerlink" title="向玩家的对话框发送消息"></a>向玩家的对话框发送消息</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">player.sendMessage(<span class="keyword">new</span> <span class="title class_">TranslatableComponent</span>(<span class="string">&quot;message_ID&quot;</span>),player.getUUID());</span><br></pre></td></tr></table></div></figure><p><code>message_ID</code>通常为调用该方法的物品ID+messageID，例如<code>item.MOD_ID.customItem.message</code></p><figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;message_ID&quot;</span><span class="punctuation">:</span> <span class="string">&quot;显示的文字&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure><p>※补充阅读：<span class="exturl"><a class="exturl__link"   href="https://minecraft.fandom.com/zh/wiki/%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81" >格式化代码</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h1 id="Level"   >          <a href="#Level" class="heading-link"><i class="fas fa-link"></i></a><a href="#Level" class="headerlink" title="Level"></a>Level</h1>              <h2 id="常用方法-1"   >          <a href="#常用方法-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//制造爆炸（须在服务器端调用）</span></span><br><span class="line"><span class="keyword">public</span> Explosion <span class="title function_">explode</span><span class="params">(<span class="meta">@Nullable</span> Entity entity, <span class="meta">@Nullable</span> DamageSource source, <span class="meta">@Nullable</span> ExplosionDamageCalculator damage, <span class="type">double</span> posX, <span class="type">double</span> posY, <span class="type">double</span> posZ, <span class="type">float</span> radius, <span class="type">boolean</span> fire, Explosion.BlockInteraction blockInteraction)</span>;</span><br><span class="line"><span class="comment">//BlockInteraction可选：Explosion.BlockInteraction.DESTROY/BREAK/NO</span></span><br></pre></td></tr></table></div></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Player&quot;   &gt;
          &lt;a href=&quot;#Player&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Player&quot; class=&quot;headerlink&quot; title=&quot;Player&quot;&gt;&lt;/a&gt;Player&lt;/h1&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-网络</title>
    <link href="https://lzmustb.github.io/2022/05/13/my-forge-learning-networking/"/>
    <id>https://lzmustb.github.io/2022/05/13/my-forge-learning-networking/</id>
    <published>2022-05-13T03:40:40.000Z</published>
    <updated>2022-05-19T00:00:19.979Z</updated>
    
    <content type="html"><![CDATA[        <h2 id="Networking"   >          <a href="#Networking" class="heading-link"><i class="fas fa-link"></i></a><a href="#Networking" class="headerlink" title="Networking"></a>Networking</h2>      ]]></content>
    
    
      
      
    <summary type="html">
        &lt;h2 id=&quot;Networking&quot;   &gt;
          &lt;a href=&quot;#Networking&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Networking&quot; c</summary>
      
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Block Entities</title>
    <link href="https://lzmustb.github.io/2022/05/09/my-forge-learning-block_entity/"/>
    <id>https://lzmustb.github.io/2022/05/09/my-forge-learning-block_entity/</id>
    <published>2022-05-09T02:52:36.000Z</published>
    <updated>2022-05-31T02:45:11.397Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Block-Entities"   >          <a href="#Block-Entities" class="heading-link"><i class="fas fa-link"></i></a><a href="#Block-Entities" class="headerlink" title="Block Entities"></a>Block Entities</h1>      <p><code>BlockEntities</code>是简化的<code>Entities</code>，并和一个Block绑定。它们用于存储动态数据，执行任务（tick based tasks），和动态渲染。原版mc中，箱子的存储功能，熔炉的燃烧，信标的buff效果等等都是通过<code>Block Entities</code>实现的。</p><span id="more"></span>        <h2 id="Registering"   >          <a href="#Registering" class="heading-link"><i class="fas fa-link"></i></a><a href="#Registering" class="headerlink" title="Registering"></a>Registering</h2>      <p>为创建一个<code>BlockEntity</code>，你需要继承该类。Block Entities 是动态创建或移除的，因此其本身并不需要注册。而作为替代，<code>BlockEntityType</code>会被注册。</p><p>一个<code>BlockEntityType</code>的注册和其他注册方式相同。<br>通过<code>BlockEntityType$Builder#of</code>可以创建一个该Type对应的BlockEntity实例。</p><blockquote><p>This takes in a <code>Type</code> which represents the type-safe reference used to refer to this registry object in a <code>DataFixer</code>. <code>DataFixer</code>为可选选项，build()中可传入null</p></blockquote><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockEntityRegistry</span> &#123;</span><br><span class="line">    <span class="comment">//创建注册器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DeferredRegister&lt;BlockEntityType&lt;?&gt;&gt; BLOCK_ENTITIES=DeferredRegister.create(ForgeRegistries.BLOCK_ENTITIES, MOD_ID);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注册TestBlockEntity为例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RegistryObject&lt;BlockEntityType&lt;TestBlockEntity&gt;&gt; TEST_BLOCK_ENTITY=BLOCK_ENTITIES.register(<span class="string">&quot;test_block_entity&quot;</span>,()-&gt;BlockEntityType.Builder.of(TestBlockEntity::<span class="keyword">new</span>,BlockRegistry.TEST_BLOCK.get()).build(<span class="literal">null</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TestBlockEntity为继承了BlockEntity的自定义类</span></span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestBlockEntity</span><span class="params">(BlockPos pos, BlockState state)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(BlockEntityRegistry.TEST_BLOCK_ENTITY.get(), pos, state);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="绑定BlockEntitiy-amp-Block"   >          <a href="#绑定BlockEntitiy-amp-Block" class="heading-link"><i class="fas fa-link"></i></a><a href="#绑定BlockEntitiy-amp-Block" class="headerlink" title="绑定BlockEntitiy&amp;Block"></a>绑定BlockEntitiy&amp;Block</h2>      <p>为了给Block绑定一个BlockEntity，<code>Block</code>子类需要实现<code>EntityBlock</code>接口。<code>EntitiyBlock#newBlockEntity(BlockPos,BlockState)</code>需要被实现并返回一个<code>BlockEntitiy</code>实例。<br>(或继承<code>BaseEntityBlock</code>)<br>在<code>Block</code>类中，须重写的方法：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使方块被渲染为模型</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> RenderShape <span class="title function_">getRenderShape</span><span class="params">(BlockState state)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> RenderShape.MODEL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="存储数据"   >          <a href="#存储数据" class="heading-link"><i class="fas fa-link"></i></a><a href="#存储数据" class="headerlink" title="存储数据"></a>存储数据</h2>      <p>为了实现保存数据需要重写以下两个方法。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">saveAdditional</span><span class="params">(<span class="meta">@NotNull</span> CompoundTag tag)</span> &#123;</span><br><span class="line">    tag.put(<span class="string">&quot;inventory&quot;</span>, itemHandler.serializeNBT());</span><br><span class="line">    <span class="built_in">super</span>.saveAdditional(tag);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">load</span><span class="params">(CompoundTag nbt)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.load(nbt);</span><br><span class="line">    itemHandler.deserializeNBT(nbt.getCompound(<span class="string">&quot;inventory&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>每当包含该<code>BlockEntity</code>的<code>LevelChunk</code>从一个tag保存或读取时，这些方法会被调用。用这些方法可以读写你的block entity class中的变量。</p><p>※每当你的数据改变，都需要调用<code>BlockEntity#setChanged</code>，否则在level被保存的时候，包含该<code>BlockEntity</code>的<code>LevelChunk</code>可能会被跳过。</p><p>※It is important that you call the <code>super</code> methods!<br>The tag names <code>id</code>, <code>x</code>, <code>y</code>, <code>z</code>, <code>ForgeData</code> and <code>ForgeCaps</code> are reserved by the <code>super</code> methods.</p>        <h2 id="添加计时"   >          <a href="#添加计时" class="heading-link"><i class="fas fa-link"></i></a><a href="#添加计时" class="headerlink" title="添加计时"></a>添加计时</h2>      <p>如果你需要一个计时的<code>BlockEntity</code>，比如追踪熔炼时的进程，就需要实现并重写另一个方法：<code>EntityBlock#getTicker(Level, BlockState, BlockEntityType)</code></p><p>※This can implement different tickers depending on which logical side the user is on, or just implement one general ticker. In either case, a <code>BlockEntityTicker</code> must be returned. Since this is a functional interface, it can just take in a method representing the ticker instead:</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Inside some Block subclass</span></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> &lt;T <span class="keyword">extends</span> <span class="title class_">BlockEntity</span>&gt; BlockEntityTicker&lt;T&gt; <span class="title function_">getTicker</span><span class="params">(Level level, BlockState state, BlockEntityType&lt;T&gt; type)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> type == MyBlockEntityTypes.MYBE.get() ? MyBlockEntity::tick : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inside MyBlockEntity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tick</span><span class="params">(Level level, BlockPos pos, BlockState state, T blockEntity)</span> &#123;</span><br><span class="line">  <span class="comment">// Do stuff</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>※该方法会在每tick都调用一次，因此不应该进行过于复杂的运算。你应当在每隔Xticks进行一次复杂的运算。<br>（每秒包含的tick数可能低于20，但不会更高）</p>        <h2 id="Synchronizing-the-Data-to-the-Client"   >          <a href="#Synchronizing-the-Data-to-the-Client" class="heading-link"><i class="fas fa-link"></i></a><a href="#Synchronizing-the-Data-to-the-Client" class="headerlink" title="Synchronizing the Data to the Client"></a>Synchronizing the Data to the Client</h2>      <p>同步数据又三种方法：</p><ul><li>synchronizing on chunk load</li><li>on block updates</li><li>custom network message</li></ul>        <h1 id="MenuProvider"   >          <a href="#MenuProvider" class="heading-link"><i class="fas fa-link"></i></a><a href="#MenuProvider" class="headerlink" title="MenuProvider"></a>MenuProvider</h1>      ]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Block-Entities&quot;   &gt;
          &lt;a href=&quot;#Block-Entities&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Block-Entities&quot; class=&quot;headerlink&quot; title=&quot;Block Entities&quot;&gt;&lt;/a&gt;Block Entities&lt;/h1&gt;
      &lt;p&gt;&lt;code&gt;BlockEntities&lt;/code&gt;是简化的&lt;code&gt;Entities&lt;/code&gt;，并和一个Block绑定。它们用于存储动态数据，执行任务（tick based tasks），和动态渲染。原版mc中，箱子的存储功能，熔炉的燃烧，信标的buff效果等等都是通过&lt;code&gt;Block Entities&lt;/code&gt;实现的。&lt;/p&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Items</title>
    <link href="https://lzmustb.github.io/2022/05/08/my-forge-learning-item/"/>
    <id>https://lzmustb.github.io/2022/05/08/my-forge-learning-item/</id>
    <published>2022-05-08T00:22:14.000Z</published>
    <updated>2022-07-02T01:23:13.478Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Items"   >          <a href="#Items" class="heading-link"><i class="fas fa-link"></i></a><a href="#Items" class="headerlink" title="Items"></a>Items</h1>      <span id="more"></span>        <h2 id="Creating-an-Item-创建物品"   >          <a href="#Creating-an-Item-创建物品" class="heading-link"><i class="fas fa-link"></i></a><a href="#Creating-an-Item-创建物品" class="headerlink" title="Creating an Item-创建物品"></a>Creating an Item-创建物品</h2>              <h3 id="Basic-Items"   >          <a href="#Basic-Items" class="heading-link"><i class="fas fa-link"></i></a><a href="#Basic-Items" class="headerlink" title="Basic Items"></a>Basic Items</h3>      <p>Basic items是没有特殊功能的，（如木棒或白糖），不需要专门的类。可以通过实例化带有<code>Item$Properties</code>的<code>Item</code>类创建一个基本的Item。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">customItem</span> <span class="keyword">extends</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">customItem</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">Properties</span>().);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>※以上方法均可以链式调用。</p>        <h2 id="Properties-属性"   >          <a href="#Properties-属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties-属性" class="headerlink" title="Properties-属性"></a>Properties-属性</h2>              <h3 id="Properties方法一览"   >          <a href="#Properties方法一览" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties方法一览" class="headerlink" title="Properties方法一览"></a>Properties方法一览</h3>      <p><code>food(FoodProperties)</code>：设置<a href="">食物</a>相关的属性<br><code>stacksTo(int)</code>：设置最大存储量(StackSize,默认为64)<br><code>durability(int)</code>：设置耐久度(调用后StackSize固定为1)<br><code>craftRemainder(Item)</code>：设置该item的容器item，用于倒出岩浆后返还铁桶。<br><code>tab(CreativeModeTab)</code>：设定该道具属于哪个<code>CreativeModeTab</code>目录<br><code>rarity(Rarity)</code>：稀有度，有<code>COMMON</code>(默认)，<code>UNCOMMON</code>，<code>RARE</code>，<code>EPIC</code><br><code>fireResistant()</code>：设置为抗火(不会被岩浆烧掉)<br><code>setNoRepair()</code>：使道具无法被修复，即使有耐久属性。</p><p><a href="null">effect一览</a></p>        <h3 id="tab"   >          <a href="#tab" class="heading-link"><i class="fas fa-link"></i></a><a href="#tab" class="headerlink" title="tab()"></a>tab()</h3>      <p><code>TAB_BUILDING_BLOCKS</code>：建筑方块<br><code>TAB_DECORATIONS</code>：装饰性方块<br><code>TAB_REDSTONE</code>：红石<br><code>TAB_TRANSPORTATION</code>：交通运输<br><code>TAB_MISC</code>：杂项<br><code>TAB_FOOD</code>：食物<br><code>TAB_TOOLS</code>：工具<br><code>TAB_COMBAT</code>：战斗用品<br><code>TAB_BREWING</code>：酿造<br><code>TAB_MATERIALS</code>：(&#x3D;<code>TAB_MISC</code>)</p><p>调用：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Properties().tab(CreativeModeTab.TAB_BREWING)</span><br></pre></td></tr></table></div></figure>        <h4 id="自定义Tab"   >          <a href="#自定义Tab" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义Tab" class="headerlink" title="自定义Tab"></a>自定义Tab</h4>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomTab</span> <span class="keyword">extends</span> <span class="title class_">CreativeModeTab</span>&#123;</span><br><span class="line"><span class="comment">//实例化并录入ID</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">CustomTab</span> <span class="variable">customTab</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">CustomTab</span>(<span class="string">&quot;customTab_ID&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回一个物品，并作为自定义Tab的图标</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ItemStack <span class="title function_">makeIcon</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ItemStack</span>(ItemRegistry.test_Item.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>本地化：</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">itemGroup.customTab_ID:&quot;Tab名称&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="Food-食物"   >          <a href="#Food-食物" class="heading-link"><i class="fas fa-link"></i></a><a href="#Food-食物" class="headerlink" title="Food-食物"></a>Food-食物</h2>              <h3 id="food-–FoodProperties"   >          <a href="#food-–FoodProperties" class="heading-link"><i class="fas fa-link"></i></a><a href="#food-–FoodProperties" class="headerlink" title="food()–FoodProperties"></a>food()–FoodProperties</h3>      <p>※mc除了可见的饱食度条以外，还有隐藏饱食度(float)。隐藏饱食度的最大值为当前饱食度。玩家的行为会消耗隐藏饱食度，当隐藏饱食度为0时，饱食条会开始抖动。<br>详见：<span class="exturl"><a class="exturl__link"   href="https://minecraft.fandom.com/wiki/Hunger#Mechanics" >wiki:Hunger</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p><p><code>nutrition(int)</code>：设置回复的饱食度<br><code>saturationMod(float)</code>：设置回复的隐藏饱食度<br><code>isMeat()</code>：设为肉类<br><code>alwaysEat()</code>：设为在任意场合都能吃(即使在满腹时)<br><code>fast()</code>：设为fastFood(进食速度加快)<br><code>effect(Supplier&lt;&gt;)</code>：设置食用获得的效果以及概率</p><p>FoodProperties需要通过Builder()创建，且在最后调用build()完成创建。effect中的三个参数为持续时间，等级，概率。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Properties().food(<span class="keyword">new</span> <span class="title class_">FoodProperties</span>.Builder()</span><br><span class="line">             .nutrition(<span class="number">4</span>)</span><br><span class="line">             .saturationMod(<span class="number">2</span>)</span><br><span class="line">.effect(()-&gt;<span class="keyword">new</span> <span class="title class_">MobEffectInstance</span>(MobEffects.FIRE_RESISTANCE, <span class="number">200</span>, <span class="number">0</span>), <span class="number">0.5F</span>))</span><br><span class="line">             .build());</span><br></pre></td></tr></table></div></figure>        <h3 id="Item-getUseDuration-ItemStack"   >          <a href="#Item-getUseDuration-ItemStack" class="heading-link"><i class="fas fa-link"></i></a><a href="#Item-getUseDuration-ItemStack" class="headerlink" title="Item#getUseDuration(ItemStack)"></a>Item#getUseDuration(ItemStack)</h3>      <p>可以自定义吃东西花费的时间</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUseDuration</span><span class="params">(ItemStack itemstack)</span>&#123;</span><br><span class="line"><span class="comment">//通常的食物为32,fastFood为16</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="其他method"   >          <a href="#其他method" class="heading-link"><i class="fas fa-link"></i></a><a href="#其他method" class="headerlink" title="其他method"></a>其他method</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加物品提示</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">appendHoverText</span><span class="params">(ItemStack itemStack, <span class="meta">@Nullable</span> Level level_, List&lt;Component&gt; pTooltipComponents, TooltipFlag pIsAdvanced)</span>&#123;</span><br><span class="line">pTooltipComponents.add(<span class="keyword">new</span> <span class="title class_">TranslatableComponent</span>(<span class="string">&quot;message_ID&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><ul><li><code>useOn</code>：当使用道具右键方块时调用</li><li><code>interactLivingEntity</code>：当右键一个实体时调用</li><li><code>hurtEnemy</code>：当玩家用物品攻击一个实体时调用</li><li><code>onCraftedBy</code>：当从工作台拿下物品时调用</li><li><code>inventoryTick</code>：当物品在物品栏时每tick调用</li><li><code>isValidRepairItem</code>：第二个物品能否用于在铁砧修复第一个物品</li></ul>        <h2 id="ItemStack-物品堆"   >          <a href="#ItemStack-物品堆" class="heading-link"><i class="fas fa-link"></i></a><a href="#ItemStack-物品堆" class="headerlink" title="ItemStack-物品堆"></a>ItemStack-物品堆</h2>              <h3 id="ItemStack-getItem"   >          <a href="#ItemStack-getItem" class="heading-link"><i class="fas fa-link"></i></a><a href="#ItemStack-getItem" class="headerlink" title="ItemStack#getItem()"></a>ItemStack#getItem()</h3>      <p>返回当前物品格中的物品，如果为空则返回<code>Items.AIR</code></p>        <h3 id="ItemStack-hurtAndBreak-int-T-Consumer-lt-T-gt"   >          <a href="#ItemStack-hurtAndBreak-int-T-Consumer-lt-T-gt" class="heading-link"><i class="fas fa-link"></i></a><a href="#ItemStack-hurtAndBreak-int-T-Consumer-lt-T-gt" class="headerlink" title="ItemStack#hurtAndBreak(int , T , Consumer&lt;T&gt; )"></a>ItemStack#hurtAndBreak(int , T , Consumer&lt;T&gt; )</h3>              <h2 id="IForgeItem接口"   >          <a href="#IForgeItem接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#IForgeItem接口" class="headerlink" title="IForgeItem接口"></a>IForgeItem接口</h2>      <p>该接口包含许多供制作者重写的方法。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断能否禁用盾牌5秒(原版中斧类武器可以)</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">canDisableShield</span><span class="params">(ItemStack stack, ItemStack shield, LivingEntity entity, LivingEntity attacker)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span> <span class="keyword">instanceof</span> AxeItem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回燃烧时间(tick)，0为非燃料，-1将交给原版逻辑判断</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getBurnTime</span><span class="params">(ItemStack itemStack, <span class="meta">@Nullable</span> RecipeType&lt;?&gt; recipeType)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="Register-注册"   >          <a href="#Register-注册" class="heading-link"><i class="fas fa-link"></i></a><a href="#Register-注册" class="headerlink" title="Register-注册"></a>Register-注册</h2>      <p>注册有两种主要方法，这里选择在item目录下创建一个item注册器类。</p><p>注册时，register()的第一个参数为item_ID，唯一且<strong>不能出现大写字母</strong>。</p><p>第二个参数为一个item的实例。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ItemRegistry</span> &#123;</span><br><span class="line"><span class="comment">//创建注册器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DeferredRegister&lt;Item&gt; ITEMS = DeferredRegister.create(ForgeRegistries.ITEMS, MOD_ID);</span><br><span class="line"><span class="comment">//注册有自定义类的物品</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RegistryObject&lt;Item&gt; testItem = ITEMS.register(<span class="string">&quot;test_item1&quot;</span>, ()-&gt;<span class="keyword">new</span> <span class="title class_">TestItem</span>()));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//也可以在注册时临时创建一个物品</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RegistryObject&lt;Item&gt; testItem = ITEMS.register(<span class="string">&quot;test_item2&quot;</span>, ()-&gt;<span class="keyword">new</span> <span class="title class_">Item</span>(<span class="keyword">new</span> <span class="title class_">Properties</span>()));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在主类中调用注册器的注册事件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomMod</span>&#123;</span><br><span class="line">/.../</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">CustomMod</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">IEventBus</span> <span class="variable">eventBus</span> <span class="operator">=</span> FMLJavaModLoadingContext.get().getModEventBus();</span><br><span class="line">ItemRegistry.ITEMS.register(eventBus);</span><br><span class="line">&#125;</span><br><span class="line">/.../</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="材质和模型"   >          <a href="#材质和模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#材质和模型" class="headerlink" title="材质和模型"></a>材质和模型</h2>      <p>在<code>src/main/resources</code>目录下，需要创建如下结构，来给物品附上材质和模型。</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">resources</span><br><span class="line">├── assets</span><br><span class="line">│   └── MOD_ID</span><br><span class="line">│       ├── models</span><br><span class="line">│       │   └── item</span><br><span class="line">│       │       └── item_ID.json</span><br><span class="line">│       └── textures</span><br><span class="line">│           └── item</span><br><span class="line">│               └── item_ID.png</span><br><span class="line">├── lang</span><br><span class="line">│   └── en_us.json</span><br></pre></td></tr></table></div></figure>        <h3 id="models-x2F-item-ID-json"   >          <a href="#models-x2F-item-ID-json" class="heading-link"><i class="fas fa-link"></i></a><a href="#models-x2F-item-ID-json" class="headerlink" title="models &#x2F; item_ID.json"></a>models &#x2F; item_ID.json</h3>      <figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;parent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;item/generated&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;textures&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;layer0&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MOD_ID:item/item_ID&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure><p><code>parent</code>指定了该模型的父模型，<code>textures</code>指定了具体的材质，材质放在<code>assets/textures/item</code>下。</p>        <h3 id="本地化"   >          <a href="#本地化" class="heading-link"><i class="fas fa-link"></i></a><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3>      <figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;item.MOD_ID.item_ID&quot;</span><span class="punctuation">:</span> <span class="string">&quot;物品名称&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure>        <h2 id="Tools-工具"   >          <a href="#Tools-工具" class="heading-link"><i class="fas fa-link"></i></a><a href="#Tools-工具" class="headerlink" title="Tools-工具"></a>Tools-工具</h2>      <p>Tools继承了<code>Item</code>类。它们的实现主要依赖继承特定类，<code>TierSortingRegistry</code>，和tags。</p>        <h3 id="Tier（品质）"   >          <a href="#Tier（品质）" class="heading-link"><i class="fas fa-link"></i></a><a href="#Tier（品质）" class="headerlink" title="Tier（品质）"></a>Tier（品质）</h3>      <p>原版的Tiers有六种[品质](<span class="exturl"><a class="exturl__link"   href="https://minecraft.fandom.com/zh/wiki/%E5%93%81%E8%B4%A8" >品质 - Minecraft Wiki，最详细的我的世界百科 (fandom.com)</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>)<br><code>Wood</code>,<code>Stone</code>,<code>Iron</code>,<code>Diamond</code>,<code>Netherite</code>,<code>Gold</code><br>你可以实例化ForgeTier创建自定义的工具品质：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomTier</span>&#123;</span><br><span class="line">    <span class="comment">//前四个参数为挖掘等级,耐久度,挖掘倍率,伤害加成,附魔能力</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ForgeTier CUSTOMTIER=<span class="keyword">new</span> <span class="title class_">ForgeTier</span>(</span><br><span class="line">        <span class="number">1</span>,<span class="number">100</span>,<span class="number">1.5f</span>,<span class="number">2f</span>,<span class="number">22</span>,</span><br><span class="line">        BlockTags.NEEDS_DIAMOND_TOOL,</span><br><span class="line">        ()-&gt;Ingredient.of(ItemRegistry.test_Item.get()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>你也可以实现<code>Tier</code>接口自定义工具品质：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CustomTier</span> <span class="keyword">implements</span> <span class="title class_">Tier</span>&#123;</span><br><span class="line">EXAMPLE_TIER(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1.0F</span>, <span class="number">1.0F</span>, <span class="number">1</span>, () -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> Ingredient.of(Items.Custom_Ingredient);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> level;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> uses;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">float</span> speed;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">float</span> damage;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> enchantmentValue;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> LazyValue&lt;Ingredient&gt; repairIngredient;</span><br><span class="line"></span><br><span class="line">CustomTier(<span class="type">int</span> level, <span class="type">int</span> durability, <span class="type">float</span> miningSpeed, <span class="type">float</span> damage, <span class="type">int</span> enchantability, Supplier&lt;Ingredient&gt; repairIngredient) &#123;</span><br><span class="line">        <span class="built_in">this</span>.level = level;</span><br><span class="line">        <span class="built_in">this</span>.uses = durability;</span><br><span class="line">        <span class="built_in">this</span>.speed = miningSpeed;</span><br><span class="line">        <span class="built_in">this</span>.damage = damage;</span><br><span class="line">        <span class="built_in">this</span>.enchantmentValue = enchantability;</span><br><span class="line">        <span class="built_in">this</span>.repairIngredient = <span class="keyword">new</span> <span class="title class_">LazyValue</span>&lt;&gt;(repairIngredient);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>接口中的方法：</p><ul><li><code>getUses</code>：返回该品质的耐久。</li><li><code>getSpeed</code>：返回该品质的挖掘效率乘数。</li><li><code>getAttackDamageBonus</code>：返回该品质基本攻击伤害。</li><li><code>getLevel</code>：返回该品质的挖掘等级(原版为0-4)</li><li><code>getEnchantmentValue</code>：返回该品质的附魔效益</li><li><code>getRepairIngredient</code>：返回用于修复该品质工具的材料</li><li><code>getTag</code>：以<code>Tag&lt;Block&gt;</code>的形式返回该品质的工具可以挖掘的方块，命名格式为：<code>&lt;modid&gt;:needs_&lt;tier_name&gt;_tool</code></li></ul>        <h3 id="TierSortingRegistry"   >          <a href="#TierSortingRegistry" class="heading-link"><i class="fas fa-link"></i></a><a href="#TierSortingRegistry" class="headerlink" title="TierSortingRegistry"></a>TierSortingRegistry</h3>      <p>通过static声明，使Tiers比Items先注册。一个tier可以由<code>TierSortingRegistry#registerTier</code>注册。所有未在sorting system中定义的tier都会采用原版默认行为。<br><span class="exturl"><a class="exturl__link"   href="https://forge.gemwire.uk/wiki/Making_Tools" >暂略</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>        <h3 id="创建工具"   >          <a href="#创建工具" class="heading-link"><i class="fas fa-link"></i></a><a href="#创建工具" class="headerlink" title="创建工具"></a>创建工具</h3>      <p>继承对应的工具类可以创建工具。<br>分别为<code>SwordItem</code>,<code>PickaxeItem</code>,<code>AxeItem</code>,<code>ShovelItem</code>,<code>HoeItem</code></p>        <h3 id="SwordItem-剑类"   >          <a href="#SwordItem-剑类" class="heading-link"><i class="fas fa-link"></i></a><a href="#SwordItem-剑类" class="headerlink" title="SwordItem-剑类"></a>SwordItem-剑类</h3>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用该剑对一个实体造成伤害时调用</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hurtEnemy</span><span class="params">(ItemStack item, LivingEntity pTarget, LivingEntity pAttacker)</span></span><br><span class="line"></span><br></pre></td></tr></table></div></figure>        <h3 id="模型和材质"   >          <a href="#模型和材质" class="heading-link"><i class="fas fa-link"></i></a><a href="#模型和材质" class="headerlink" title="模型和材质"></a>模型和材质</h3>      <figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;parent&quot;</span><span class="punctuation">:</span> <span class="string">&quot;item/handheld&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;textures&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;layer0&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MOD_ID:item/tool_ID&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure>        <h2 id="Armor-防具"   >          <a href="#Armor-防具" class="heading-link"><i class="fas fa-link"></i></a><a href="#Armor-防具" class="headerlink" title="Armor-防具"></a>Armor-防具</h2>              <h3 id="自定义防具材料"   >          <a href="#自定义防具材料" class="heading-link"><i class="fas fa-link"></i></a><a href="#自定义防具材料" class="headerlink" title="自定义防具材料"></a>自定义防具材料</h3>      <p>利用快捷键<code>ctrl+h</code>可以查看已实现接口的类，找到<code>net.minecraft.world.item.ArmorMaterials</code>，复制并修改即可。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CustomArmorMaterials</span> <span class="keyword">implements</span> <span class="title class_">ArmorMaterial</span> &#123;</span><br><span class="line"><span class="comment">//注意点：该数组为防具的耐久基数，并且是从脚到头(靴子到头盔)的顺序。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span>[] HEALTH_PER_SLOT = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">13</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">11</span>&#125;;</span><br><span class="line">    <span class="comment">//注意点：复制后getName()要改成如下，&quot;MOD_ID:name&quot;</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> MOD_ID+<span class="string">&quot;:&quot;</span>+<span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h3 id="注册"   >          <a href="#注册" class="heading-link"><i class="fas fa-link"></i></a><a href="#注册" class="headerlink" title="注册"></a>注册</h3>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RegistryObject&lt;Item&gt; CUSTOM_HELMET=ITEMS.register(<span class="string">&quot;custom_helmet&quot;</span>,()-&gt;<span class="keyword">new</span> <span class="title class_">ArmorItem</span>(CustomArmorMaterials.MATERIAL,EquipmentSlot.HEAD,<span class="keyword">new</span> <span class="title class_">Item</span>.Properties()));</span><br></pre></td></tr></table></div></figure><div class="table-container"><table><thead><tr><th>类型</th><th>EquipmentSlot</th></tr></thead><tbody><tr><td>头盔</td><td>EquipmentSlot.HEAD</td></tr><tr><td>胸甲</td><td>EquipmentSlot.CHEST</td></tr><tr><td>护腿</td><td>EquipmentSlot.LEGS</td></tr><tr><td>靴子</td><td>EquipmentSlot.FEET</td></tr></tbody></table></div>        <h3 id="材质"   >          <a href="#材质" class="heading-link"><i class="fas fa-link"></i></a><a href="#材质" class="headerlink" title="材质"></a>材质</h3>      <p>models&#x2F;json和其他item相同。<br>盔甲的材质要放在以下目录</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">resources</span><br><span class="line">├── assets</span><br><span class="line">│   └── MOD_ID</span><br><span class="line">│       ├── textures</span><br><span class="line">│       │   └── models</span><br><span class="line">│       │       └── armorID_layer_1.png</span><br><span class="line">│       │       └── armorID_layer_2.png</span><br></pre></td></tr></table></div></figure>        <h3 id="特殊效果"   >          <a href="#特殊效果" class="heading-link"><i class="fas fa-link"></i></a><a href="#特殊效果" class="headerlink" title="特殊效果"></a>特殊效果</h3>      <p>为了实现特殊效果，应自定义Armor类，并继承<code>ArmorItem</code></p>        <h2 id="Projectile-远程武器"   >          <a href="#Projectile-远程武器" class="heading-link"><i class="fas fa-link"></i></a><a href="#Projectile-远程武器" class="headerlink" title="Projectile-远程武器"></a>Projectile-远程武器</h2>              <h2 id="BlockEntityWithoutLevelRenderer"   >          <a href="#BlockEntityWithoutLevelRenderer" class="heading-link"><i class="fas fa-link"></i></a><a href="#BlockEntityWithoutLevelRenderer" class="headerlink" title="BlockEntityWithoutLevelRenderer"></a>BlockEntityWithoutLevelRenderer</h2>      <p>这是一个处理道具动态渲染的方法。</p>        <h2 id="Using"   >          <a href="#Using" class="heading-link"><i class="fas fa-link"></i></a><a href="#Using" class="headerlink" title="Using"></a>Using</h2>      <p><code>BlockEntityWithoutLevelRenderer</code>可以让你通过<code>public void renderByItem(ItemStack itemStack, TransformType transformType, PoseStack poseStack, MultiBufferSource bufferSource, int combinedLight, int combinedOverlay)</code>渲染你的item。<br>（以下简称BEWLR）</p><p>为了使用BEWLR，该Item必须满足它的model的<code>BakedModel#isCustomRenderer</code>返回true。如果它未设置BEWLR，会调用默认的<code>ItemRenderer#getBlockEntityRenderer</code>。</p><p>给一个item设置BEWLR，需要有一个<code>IItemRenderProperties</code>的匿名实例在<code>Item#initializeClient</code>方法中。在匿名实例中，<code>IItemRenderProperties#getItemStackRenderer</code>需要被重写，并返回你的BEWLR。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// In your item class</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initializeClient</span><span class="params">(Consumer&lt;IItemRenderProperties&gt; consumer)</span> &#123;</span><br><span class="line">  consumer.accept(<span class="keyword">new</span> <span class="title class_">IItemRenderProperties</span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> BlockEntityWithoutLevelRenderer <span class="title function_">getItemStackRenderer</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> myBEWLRInstance;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>※ 每个模组只能有一个自定义BEWLR的实例</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Items&quot;   &gt;
          &lt;a href=&quot;#Items&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Items&quot; class=&quot;headerlink&quot; title=&quot;Items&quot;&gt;&lt;/a&gt;Items&lt;/h1&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Projectile</title>
    <link href="https://lzmustb.github.io/2022/05/08/my-forge-learning-projectile/"/>
    <id>https://lzmustb.github.io/2022/05/08/my-forge-learning-projectile/</id>
    <published>2022-05-08T00:22:14.000Z</published>
    <updated>2022-07-29T04:21:24.106Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Projectile-自定义投掷物"   >          <a href="#Projectile-自定义投掷物" class="heading-link"><i class="fas fa-link"></i></a><a href="#Projectile-自定义投掷物" class="headerlink" title="Projectile 自定义投掷物"></a>Projectile 自定义投掷物</h1>              <h2 id="相关基类"   >          <a href="#相关基类" class="heading-link"><i class="fas fa-link"></i></a><a href="#相关基类" class="headerlink" title="相关基类"></a>相关基类</h2>      <p><code>Projectile</code></p><ul><li>存储投掷物的所有者</li><li>包含发射的方法，设置移动方向</li><li>has methods for what happens for reacting to impacts</li><li>不包含移动和碰撞检测的逻辑</li></ul><p><code>ThrowableProjectile &gt; Projectile</code></p><ul><li>在tick方法中包含移动和碰撞检测</li></ul><p><code>ThrowableItemProjectile &gt; ThrowableProjectile</code></p><ul><li>同时呈现为物品</li></ul><p><code>AbstractArrow &gt; Projectile</code></p><ul><li>在tick方法中包含移动和碰撞检测</li><li>可以旋转并朝向移动方向</li><li>穿透效果</li><li>基于速度和<code>setBaseDamage</code>造成实际伤害</li><li>掉在地上并且可被拾取</li><li>可被<code>ArrowItem</code>类的武器发射</li></ul><p><code>Arrow &gt; AbstractArrow</code></p><ul><li>附加药水效果</li></ul>        <h2 id="Rendering"   >          <a href="#Rendering" class="heading-link"><i class="fas fa-link"></i></a><a href="#Rendering" class="headerlink" title="Rendering"></a>Rendering</h2>      <p>为了让你的投掷物被玩家们看见，你必须将它和<code>EntitiyRenderer</code>绑定。</p>]]></content>
    
    
      
      
    <summary type="html">
        &lt;h1 id=&quot;Projectile-自定义投掷物&quot;   &gt;
          &lt;a href=&quot;#Projectile-自定义投掷物&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Blocks</title>
    <link href="https://lzmustb.github.io/2022/05/07/my-forge-learning-block/"/>
    <id>https://lzmustb.github.io/2022/05/07/my-forge-learning-block/</id>
    <published>2022-05-07T00:08:39.000Z</published>
    <updated>2022-05-30T10:51:23.493Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Blocks"   >          <a href="#Blocks" class="heading-link"><i class="fas fa-link"></i></a><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h1>      <span id="more"></span>        <h2 id="Register-注册"   >          <a href="#Register-注册" class="heading-link"><i class="fas fa-link"></i></a><a href="#Register-注册" class="headerlink" title="Register-注册"></a>Register-注册</h2>      <p>地面上的方块是<code>Block</code>，物品栏的方块是继承了<code>Item</code>的<code>BlockItem</code>。因此在注册方块的同时，通常需要同时注册方块物品。(也有像水方块等例外，其没有直接对应的物品) 因此可以将注册方法进行包装，便于后续注册方块。</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BLOCKS注册器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> DeferredRegister&lt;Block&gt; BLOCKS=DeferredRegister.create(ForgeRegistries.BLOCKS, MOD_ID);</span><br><span class="line"><span class="comment">//BlockItem的注册方法</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Block</span>&gt; RegistryObject&lt;Item&gt; <span class="title function_">registryBlockItem</span><span class="params">(String name, Supplier&lt;T&gt; block, CreativeModeTab tab)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ItemRegistry.ITEMS.register(name,()-&gt;<span class="keyword">new</span> <span class="title class_">BlockItem</span>(block.get(), <span class="keyword">new</span> <span class="title class_">Item</span>.Properties().tab(tab)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Block的注册方法，并调用BlockItem注册方法</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Block</span>&gt; RegistryObject&lt;T&gt; <span class="title function_">registryBlock</span><span class="params">(String name,RegistryObject&lt;T&gt; block,CreativeModeTab tab)</span>&#123;</span><br><span class="line">    RegistryObject&lt;T&gt; newBlock=BLOCKS.register(name,block);</span><br><span class="line">    registryBlockItem(name,newBlock,tab);</span><br><span class="line">    <span class="keyword">return</span> newBlock;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//注册Block</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> RegistryObject&lt;Block&gt; TEST_BLOCK =registryBlockWithItem(<span class="string">&quot;test_block&quot;</span>,()-&gt;<span class="keyword">new</span> <span class="title class_">TestBlock</span>(),CustomTab.instance);</span><br></pre></td></tr></table></div></figure>        <h2 id="Properties-属性"   >          <a href="#Properties-属性" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties-属性" class="headerlink" title="Properties-属性"></a>Properties-属性</h2>      <p>原版方块的属性可在<code>net.minecraft.world.level.block.Blocks</code>中查看</p>        <h3 id="Properties方法一览"   >          <a href="#Properties方法一览" class="heading-link"><i class="fas fa-link"></i></a><a href="#Properties方法一览" class="headerlink" title="Properties方法一览"></a>Properties方法一览</h3>      <p><code>of(Material)</code>：设置方块的材质<br><code>destroyTime(float)</code>：设置挖掘时间<br><code>explosionResistance(float)</code>：设置爆炸抗性(须大于0F)<br><code>strength(float，float)</code>：调用以上两个方法<br><code>requireCorrectToolForDrops()</code><br><code>sound(SoundType)</code>：详见<span class="exturl"><a class="exturl__link"   href="https://mcforge.readthedocs.io/en/1.18.x/gameeffects/sounds/" >sounds</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span><br><code>lightLevel((state)-&gt;)</code>：设置方块的亮度，通常为0~15(可通过state属性控制)<br><code>friction</code>：摩擦力，默认0.6，冰块为0.98。<br><code>speedFactor(float)</code>：对速度的影响，默认为1F(灵魂沙为0.4F,减速至40%左右)<br><code>jumpFactor(float)</code>：对跳跃的影响,默认为1F(蜂蜜块为0.5F，跳跃高度减至15%)<br><code>instabreak()</code><br><code>randomTicks()</code>：接收随机刻<br><code>noCollission()</code>：设为无碰撞方块(按钮等)但对速度，跳跃的影响依然生效<br><code>noOcclusion()</code>：是否会使玩家窒息<br><code>dynamicShape()</code><br><code>noDrops()</code>：无掉落<br><code>lootFrom()</code><br><code>air()</code><br><code>isValidSpawn(BlockBehaviour.StateArgumentPredicate&lt;EntityType&lt;?&gt;&gt;)</code><br><code>isRedstoneConductor(BlockBehaviour.StatePredicate)</code><br><code>copy(Block.BlockBehaviour)</code>：复制另一个方块的属性</p><p>所有这些方法都可以连锁调用。</p>        <h2 id="IForgeBlock接口"   >          <a href="#IForgeBlock接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#IForgeBlock接口" class="headerlink" title="IForgeBlock接口"></a>IForgeBlock接口</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果为true，会作为燃烧的方块对生物造成伤害</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isBurning</span><span class="params">(BlockState state, BlockGetter level, BlockPos pos)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span> == Blocks.FIRE || <span class="built_in">this</span> == Blocks.LAVA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="其他Method"   >          <a href="#其他Method" class="heading-link"><i class="fas fa-link"></i></a><a href="#其他Method" class="headerlink" title="其他Method"></a>其他Method</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//玩家右键方块时调用</span></span><br><span class="line"><span class="keyword">public</span> InteractionResult <span class="title function_">use</span><span class="params">(BlockState state, Level world, BlockPos pos, Player player, InteractionHand hand, BlockHitResult hit)</span></span><br><span class="line"><span class="comment">//返回true时，方块可以种植植物</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">canSustainPlant</span><span class="params">(BlockState state, BlockGetter world, BlockPos pos, Direction facing, IPlantable plantable)</span></span><br><span class="line"><span class="comment">//接收随机刻</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isRandomlyTicking</span><span class="params">(BlockState state)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">randomTick</span><span class="params">(BlockState state, ServerLevel world, BlockPos pos, Random rand)</span></span><br><span class="line"><span class="comment">//玩家踩在方块上时调用(例子为施加加速效果)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stepOn</span><span class="params">(Level level,BlockPos pos,BlockState state,Entity entity)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!level.isClientSide())&#123;</span><br><span class="line"><span class="keyword">if</span>(entity <span class="keyword">instanceof</span> LivingEntity)&#123;</span><br><span class="line">            LivingEntity livingEntity=((LivingEntity)entity);</span><br><span class="line">            livingEntity.addEffect(<span class="keyword">new</span> <span class="title class_">MobEffectInstance</span>(MobEffects.MOVEMENT_SPEED,<span class="number">300</span>));</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//（被实体）放置时调用</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPlacedBy</span><span class="params">(Level level, BlockPos pos, BlockState state, <span class="meta">@Nullable</span> LivingEntity placer, ItemStack stack)</span></span><br><span class="line"><span class="comment">//玩家左键方块时调用</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attack</span><span class="params">(BlockState state, Level level, BlockPos pos, Player player)</span></span><br><span class="line"><span class="comment">//在玩家破坏方块前调用(原版的活塞，TNT重写了此方法)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">playerWillDestroy</span><span class="params">(Level level, BlockPos pos, BlockState state, Player player)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>.playerWillDestroy(level,pos,state,player);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当有实体与方块碰撞/重叠时调用(如篝火)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">entityInside</span><span class="params">(BlockState state, Level level, BlockPos pos, Entity entity)</span></span><br></pre></td></tr></table></div></figure><ul><li><code>playerDestroy </code>(used by beehives to release angry bees when you break them)</li><li><code>onRemove </code>: called when the block is destroyed for any reason</li><li><code>handleRain </code>: 1&#x2F;16 chance to be called each tick while its raining (used by cauldrons to fill with water)</li><li><code>fallOn </code>: called when an entity falls on the block. Deals the fall damage by calling <code>Entity.causeFallDamage(distance, damageMultiplier) </code>. (used by farm land to break the crop)</li><li><code>onPlace</code></li><li><code>getExpDrop </code>returns the number of experience points to give when broken (like some vanilla ores)</li></ul><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//use()使用案例</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> InteractionResult <span class="title function_">use</span><span class="params">(BlockState p_60503_, Level world, BlockPos pos, Player player, InteractionHand hand, BlockHitResult result)</span> &#123;</span><br><span class="line">    <span class="type">ItemStack</span> <span class="variable">held</span> <span class="operator">=</span> player.getItemInHand(hand);</span><br><span class="line">    <span class="keyword">if</span> (!world.isClientSide() &amp;&amp; held.getItem() == Items.GUNPOWDER) &#123;</span><br><span class="line">        world.explode(player, pos.getX(), pos.getY(), pos.getZ(), <span class="number">4.0F</span>, <span class="literal">true</span>, Explosion.BlockInteraction.DESTROY);</span><br><span class="line">        held.shrink(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> InteractionResult.CONSUME;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> InteractionResult.FAIL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="Stair-x2F-Slab-x2F-Fence-x2F-Gate"   >          <a href="#Stair-x2F-Slab-x2F-Fence-x2F-Gate" class="heading-link"><i class="fas fa-link"></i></a><a href="#Stair-x2F-Slab-x2F-Fence-x2F-Gate" class="headerlink" title="Stair&#x2F;Slab&#x2F;Fence&#x2F;Gate"></a>Stair&#x2F;Slab&#x2F;Fence&#x2F;Gate</h2>      <p>楼梯，台阶，栅栏，栅栏门</p>        <h2 id="Door-x2F-Trapdoor-x2F-Button-x2F-PressurePlate"   >          <a href="#Door-x2F-Trapdoor-x2F-Button-x2F-PressurePlate" class="heading-link"><i class="fas fa-link"></i></a><a href="#Door-x2F-Trapdoor-x2F-Button-x2F-PressurePlate" class="headerlink" title="Door&#x2F;Trapdoor&#x2F;Button&#x2F;PressurePlate"></a>Door&#x2F;Trapdoor&#x2F;Button&#x2F;PressurePlate</h2>      <p>门&#x2F;活板门&#x2F;按钮&#x2F;压力板</p>        <h2 id="透明-x2F-半透明方块"   >          <a href="#透明-x2F-半透明方块" class="heading-link"><i class="fas fa-link"></i></a><a href="#透明-x2F-半透明方块" class="headerlink" title="透明&#x2F;半透明方块"></a>透明&#x2F;半透明方块</h2>      <p>继承<code>GlassBlock</code>，（或其父类）</p>        <h2 id="ItemBlockRenderTypes"   >          <a href="#ItemBlockRenderTypes" class="heading-link"><i class="fas fa-link"></i></a><a href="#ItemBlockRenderTypes" class="headerlink" title="ItemBlockRenderTypes"></a>ItemBlockRenderTypes</h2>      <div class="table-container"><table><thead><tr><th>ItemBlockRenderTypes</th><th align="left">Block</th></tr></thead><tbody><tr><td>RenderType.tripwire()</td><td align="left">绊线钩</td></tr><tr><td>cutoutMipped()</td><td align="left">草方块，铁栏杆，玻璃板</td></tr><tr><td>cutout()</td><td align="left">玻璃，床，门，蜘蛛网，各种花草</td></tr><tr><td>translucent()</td><td align="left">染色玻璃，粘液块，蜂蜜块</td></tr></tbody></table></div>        <h2 id="应用自定义模型"   >          <a href="#应用自定义模型" class="heading-link"><i class="fas fa-link"></i></a><a href="#应用自定义模型" class="headerlink" title="应用自定义模型"></a>应用自定义模型</h2>      <p>设置碰撞箱：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">VoxelShape</span> <span class="variable">SHAPE</span> <span class="operator">=</span> Block.box(x1,y1,z1,x2,y2,z2);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> VoxelShape <span class="title function_">getShape</span><span class="params">(BlockState state,BlockGetter level,BlockPos,pos,CollisionContext,context)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SHAPE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h1 id="Block-States"   >          <a href="#Block-States" class="heading-link"><i class="fas fa-link"></i></a><a href="#Block-States" class="headerlink" title="Block States"></a>Block States</h1>              <h2 id="简介"   >          <a href="#简介" class="heading-link"><i class="fas fa-link"></i></a><a href="#简介" class="headerlink" title="简介"></a>简介</h2>      <p>一个特定的方块只存在一个实例，位于对应的注册器中。而BlockStates就是在此基础上附加了BlockPosition，BlockProperties，BlockStateProperties的实例，并通过<code>World(Level)</code>保存和修改。</p><p>方块的每个属性（property）都通过<code>Property&lt;?&gt;</code>的一个实例描述。属性包括但不限于：<br>instruments（<code>EnumProperty&lt;NoteBlockInstrument&gt;</code>）</p><p>facing（<code>DirectionProperty</code>）</p><p>poweredness（<code>Property&lt;Boolean&gt;</code>）</p>        <h2 id="使用BlockState-Properties"   >          <a href="#使用BlockState-Properties" class="heading-link"><i class="fas fa-link"></i></a><a href="#使用BlockState-Properties" class="headerlink" title="使用BlockState Properties"></a>使用BlockState Properties</h2>      <figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomBlock</span> <span class="keyword">extends</span> <span class="title class_">Block</span>&#123;</span><br><span class="line">    <span class="comment">//创建property</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> BooleanProperty CLICKED=BooleanProperty.create(<span class="string">&quot;clicked&quot;</span>);</span><br><span class="line">    <span class="comment">//关联property</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">createBlockStateDefinition</span><span class="params">(StateDefinition.Builder&lt;Block, BlockState&gt; pBuilder)</span> &#123;</span><br><span class="line">        pBuilder.add(CLICKED);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//使用property</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> InteractionResult <span class="title function_">use</span><span class="params">(BlockState state, Level level, BlockPos pos, Player player, InteractionHand hand, BlockHitResult result)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!level.isClientSide()&amp;&amp;hand==InteractionHand.MAIN_HAND)&#123;</span><br><span class="line">    <span class="comment">//获取当前CLICKED值</span></span><br><span class="line">    <span class="type">boolean</span> currentState=state.getValue(CLICKED);</span><br><span class="line">    <span class="comment">//修改CLICKED的值</span></span><br><span class="line">    level.setBlock(pos,state.setValue(CLICKED,!currentState),<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> InteractionResult.SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>调用<code>BlockState#getValue(Property&lt;?&gt;)</code>可以获得属性的值。<br>调用<code>BlockState#setValue(Property&lt;T&gt;,T)</code>设置属性的值。<br>原版提供的实现如下：</p><ul><li><p><code>IntegerProperty</code>实现：<code>Property&lt;Integer&gt;</code></p><ul><li>创建：<code>IntegerProperty#create(String propertyName, int minimum, int maximum)</code></li></ul></li><li><p><code>BooleanProperty</code> 实现：<code>Property&lt;Boolean&gt;</code></p><ul><li>创建：<code>BooleanProperty#create(String propertyName)</code></li></ul></li><li><p><code>EnumProperty&lt;E extends Enum&lt;E&gt;&gt;</code>实现：<code>Property&lt;E&gt;</code></p><ul><li><p>创建：<code>EnumProperty#create(String propertyName, Class&lt;E&gt; enumClass)</code><br>※也可以仅使用Enum中的一个子集</p><p>（见<code>EnumProperty#create</code>重载）</p></li></ul></li><li><p><code>DirectionProperty</code>简化<code>EnumProperty&lt;Direction&gt;</code></p><ul><li>一些方法：<code>DirectionProperty.create(&quot;&lt;name&gt;&quot;, Direction.Plane.HORIZONTAL)</code></li><li><code>DirectionProperty.create(&quot;&lt;name&gt;&quot;, Direction.Axis.X)</code></li></ul></li></ul><p><code>BlockStateProperties</code>类包含了原版共通的属性，而无需自己创建。</p><p>当你有期望的<code>Property&lt;&gt;</code>，在你的block类中重写<code>Block#createBlockStateDefinition(StateDefinition$Builder)</code>，并在其中调用<code>StateDefinition$Builder#add(Property)</code>。</p><p>每个block都会有默认的state设置。你可以通过在构造器中调用<code>Block#registerDefaultState(BlockState)</code>修改默认属性。<br><code>DoorBlock</code>的默认属性：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.registerDefaultState(</span><br><span class="line">  <span class="built_in">this</span>.stateDefinition.any()</span><br><span class="line">    .setValue(FACING, Direction.NORTH)</span><br><span class="line">    .setValue(OPEN, <span class="literal">false</span>)</span><br><span class="line">    .setValue(HINGE, DoorHingeSide.LEFT)</span><br><span class="line">    .setValue(POWERED, <span class="literal">false</span>)</span><br><span class="line">    .setValue(HALF, DoubleBlockHalf.LOWER)</span><br><span class="line">);</span><br></pre></td></tr></table></div></figure><p>如果你希望在放置方块时改变<code>BlockState</code>，（比如依照玩家的朝向），你可以重写<code>Block#getStateForPlacement(BlockPlaceContext)</code></p><p>因为所有可能的<code>BlockState</code>都在初始化时生成，你可以使用<code>==</code>判断两个<code>BlockState</code>是否相等。</p><p>You can get and place <code>BlockState</code>‘s in the level using <code>Level#setBlockAndUpdate(BlockPos, BlockState)</code> and <code>Level#getBlockState(BlockState)</code>. If you are placing a <code>Block</code>, call <code>Block#defaultBlockState()</code> to get the “default” state, and use subsequent calls to <code>BlockState#setValue(Property&lt;T&gt;, T)</code> as stated above to achieve the desired state.</p>        <h2 id="BlockStates和模型的绑定"   >          <a href="#BlockStates和模型的绑定" class="heading-link"><i class="fas fa-link"></i></a><a href="#BlockStates和模型的绑定" class="headerlink" title="BlockStates和模型的绑定"></a>BlockStates和模型的绑定</h2>      <p>文件路径</p><figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resources</span><br><span class="line">├── assets</span><br><span class="line">│   └── MOD_ID</span><br><span class="line">│       ├── blockstates</span><br><span class="line">│       │   └── CustomBlock.json      </span><br></pre></td></tr></table></div></figure><p>文件内</p><figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;variants&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;clicked=false&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MOD_ID:block/custom_block_off&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">    <span class="attr">&quot;clicked=true&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MOD_ID:block/custom_block_on&quot;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Blocks&quot;   &gt;
          &lt;a href=&quot;#Blocks&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Blocks&quot; class=&quot;headerlink&quot; title=&quot;Blocks&quot;&gt;&lt;/a&gt;Blocks&lt;/h1&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-本地化</title>
    <link href="https://lzmustb.github.io/2022/05/06/my-forge-learning-localization/"/>
    <id>https://lzmustb.github.io/2022/05/06/my-forge-learning-localization/</id>
    <published>2022-05-06T07:51:08.000Z</published>
    <updated>2022-05-19T00:01:05.089Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Internationalization-and-localization"   >          <a href="#Internationalization-and-localization" class="heading-link"><i class="fas fa-link"></i></a><a href="#Internationalization-and-localization" class="headerlink" title="Internationalization and localization"></a>Internationalization and localization</h1>      <p>internationalization简称i18n，是一种让代码能够在不同语言下生效的设计。Localization则是将显示文字适应用户语言的过程。</p><span id="more"></span><p>i18n通过<em>translation keys</em>实现。translation key是一个字符串，用于识别一块可显示的文字，例如<code>block.minecraft.dirt</code>是Dirt block的translation key。</p>        <h2 id="Language-files"   >          <a href="#Language-files" class="heading-link"><i class="fas fa-link"></i></a><a href="#Language-files" class="headerlink" title="Language files"></a>Language files</h2>      <p>位于<code>assets/[namespace]/lang/[locale].json</code><br>例如<code>examplemod</code>的英文翻译位于<code>assets/examplemod/lang/en_us.json</code>。<br>翻译文件必须用UTF-8编码。</p>        <h2 id="Usage-with-Blocks-and-Items"   >          <a href="#Usage-with-Blocks-and-Items" class="heading-link"><i class="fas fa-link"></i></a><a href="#Usage-with-Blocks-and-Items" class="headerlink" title="Usage with Blocks and Items"></a>Usage with Blocks and Items</h2>      <p>方块，道具以及一些其他MC中的类已经提供了translation keys。这些translation keys可以通过重写<code>@getDescriptionId</code>定义。<em>Item also has</em><code>#getDescriptionId(ItemStack)</code> <em>which can be overridden to provide different translation keys depending on ItemStack NBT.</em></p><p><code>#getDescriptionId</code>默认返回<code>block</code>或<code>item</code>，例如，一个ID为<code>examplemod:example_item</code>的道具，其language file为：</p><figure class="highlight json"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;item.examplemod.example_item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Example Item Name&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></div></figure>        <h2 id="Localization-methods"   >          <a href="#Localization-methods" class="heading-link"><i class="fas fa-link"></i></a><a href="#Localization-methods" class="headerlink" title="Localization methods"></a>Localization methods</h2>      <p><span class="exturl"><a class="exturl__link"   href="https://mcforge.readthedocs.io/en/1.18.x/concepts/internationalization/#localization-methods" >暂略</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Internationalization-and-localization&quot;   &gt;
          &lt;a href=&quot;#Internationalization-and-localization&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Internationalization-and-localization&quot; class=&quot;headerlink&quot; title=&quot;Internationalization and localization&quot;&gt;&lt;/a&gt;Internationalization and localization&lt;/h1&gt;
      &lt;p&gt;internationalization简称i18n，是一种让代码能够在不同语言下生效的设计。Localization则是将显示文字适应用户语言的过程。&lt;/p&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Resources</title>
    <link href="https://lzmustb.github.io/2022/05/06/my-forge-learning-resources/"/>
    <id>https://lzmustb.github.io/2022/05/06/my-forge-learning-resources/</id>
    <published>2022-05-06T01:52:16.000Z</published>
    <updated>2022-05-19T00:01:51.834Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="资源-Resources"   >          <a href="#资源-Resources" class="heading-link"><i class="fas fa-link"></i></a><a href="#资源-Resources" class="headerlink" title="资源 Resources"></a>资源 Resources</h1>      <p>Minecraft有两种基本的资源系统。<br><code>assets</code>位于逻辑客户端（logical client）中，用于模型，材质，本地化。<br><code>data</code>位于逻辑服务器（logical server）中，用于一些游戏机制，如合成表，<span class="exturl"><a class="exturl__link"   href="https://minecraft.fandom.com/wiki/Loot_table" >Loot table</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>等。前者由Resource packs控制，后者由Datapacks控制。</p><p>在默认的mdk中，assets和data目录位于<code>src/main/resources</code>中</p><span id="more"></span>        <h2 id="General-Files"   >          <a href="#General-Files" class="heading-link"><i class="fas fa-link"></i></a><a href="#General-Files" class="headerlink" title="General Files"></a>General Files</h2>              <h3 id="mods-toml"   >          <a href="#mods-toml" class="heading-link"><i class="fas fa-link"></i></a><a href="#mods-toml" class="headerlink" title="mods.toml"></a>mods.toml</h3>      <p>位于<code>./META-INF/</code>中，保存模组的基本信息。</p>        <h3 id="pack-mcmeta"   >          <a href="#pack-mcmeta" class="heading-link"><i class="fas fa-link"></i></a><a href="#pack-mcmeta" class="headerlink" title="pack.mcmeta"></a>pack.mcmeta</h3>      <p>使minecraft识别模组提供的assets</p>        <h2 id="Assets"   >          <a href="#Assets" class="heading-link"><i class="fas fa-link"></i></a><a href="#Assets" class="headerlink" title="Assets"></a>Assets</h2>      <p><code>./assets</code>文件夹保存了所有客户端相关的文件。这些文件保存在用户本地电脑中。</p>        <h3 id="Blockstates"   >          <a href="#Blockstates" class="heading-link"><i class="fas fa-link"></i></a><a href="#Blockstates" class="headerlink" title="Blockstates"></a>Blockstates</h3>      <p>位于<code>./assets/&lt;modid&gt;/blockstates/</code></p>        <h3 id="Localizations"   >          <a href="#Localizations" class="heading-link"><i class="fas fa-link"></i></a><a href="#Localizations" class="headerlink" title="Localizations"></a>Localizations</h3>      <p>用于本地化的json文件，名称为<span class="exturl"><a class="exturl__link"   href="https://docs.microsoft.com/en-us/previous-versions/commerce-server/ee825488(v=cs.20)?redirectedfrom=MSDN" >language code</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>的小写。</p>        <h3 id="Models"   >          <a href="#Models" class="heading-link"><i class="fas fa-link"></i></a><a href="#Models" class="headerlink" title="Models"></a>Models</h3>      <p>模型文件为json，位于<code>./assets/&lt;modid&gt;/models/block/</code>或<code>./assets/&lt;modid&gt;/models/item/</code></p>        <h3 id="Textures"   >          <a href="#Textures" class="heading-link"><i class="fas fa-link"></i></a><a href="#Textures" class="headerlink" title="Textures"></a>Textures</h3>      <p>纹理文件为png，位于<code>./assets/&lt;modid&gt;/textures/block/</code>或<code>./assets/&lt;modid&gt;/textures/item/</code>，其他实体在<code>/textures/</code>下各自独立的文件夹中。</p>        <h3 id="Data"   >          <a href="#Data" class="heading-link"><i class="fas fa-link"></i></a><a href="#Data" class="headerlink" title="Data"></a>Data</h3>      <p><code>./data</code>文件夹保存了服务器相关的文件。这些文件会通过网络从主机同步。</p>        <h3 id="Advancements"   >          <a href="#Advancements" class="heading-link"><i class="fas fa-link"></i></a><a href="#Advancements" class="headerlink" title="Advancements"></a>Advancements</h3>      <p>json文件，位于<code>./data/&lt;modid&gt;/advancements/&lt;group&gt;/</code>，其中group为进度所属。</p>        <h3 id="Loot-Tables"   >          <a href="#Loot-Tables" class="heading-link"><i class="fas fa-link"></i></a><a href="#Loot-Tables" class="headerlink" title="Loot Tables"></a>Loot Tables</h3>      <p>json文件，位于<code>./data/&lt;modid&gt;/loot_tables/&lt;group&gt;/</code>，其中group是掉落该loot table的物体，（如一个block的loot table位于<code>blocks</code>）</p>        <h3 id="Recipes"   >          <a href="#Recipes" class="heading-link"><i class="fas fa-link"></i></a><a href="#Recipes" class="headerlink" title="Recipes"></a>Recipes</h3>      <p>json文件，位于<code>./data/&lt;modid&gt;/recipes/</code></p>        <h3 id="Tags"   >          <a href="#Tags" class="heading-link"><i class="fas fa-link"></i></a><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h3>      <p>json文件，位于<code>./data/&lt;modid&gt;/tags/&lt;group&gt;/</code>其中group为创建tag的注册物体。（一个entity tag将存在于<code>entity_types</code>）</p>        <h2 id="ResourceLocation"   >          <a href="#ResourceLocation" class="heading-link"><i class="fas fa-link"></i></a><a href="#ResourceLocation" class="headerlink" title="ResourceLocation"></a>ResourceLocation</h2>      <p>mc通过<code>ResourceLocation</code>识别资源。一个<code>ResourceLocation</code>包括两个部分：命名空间和路径。它会到<code>&lt;assets|data&gt;/&lt;namespace&gt;/&lt;ctx&gt;/&lt;path&gt;</code>定位资源，其中<code>ctx</code>是<em>context-specific path fragment</em>，决定了资源如何被使用。当<code>ResourceLocation</code>用string读或写，它的形式为：<code>&lt;namespace&gt;:&lt;path&gt;</code>。如果namespace和冒号省略，那么namespace就默认为<code>minecraft</code>。一个模组通常将它的资源的命名空间设置为<code>modid</code>。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;资源-Resources&quot;   &gt;
          &lt;a href=&quot;#资源-Resources&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#资源-Resources&quot; class=&quot;headerlink&quot; title=&quot;资源 Resources&quot;&gt;&lt;/a&gt;资源 Resources&lt;/h1&gt;
      &lt;p&gt;Minecraft有两种基本的资源系统。&lt;br&gt;&lt;code&gt;assets&lt;/code&gt;位于逻辑客户端（logical client）中，用于模型，材质，本地化。&lt;br&gt;&lt;code&gt;data&lt;/code&gt;位于逻辑服务器（logical server）中，用于一些游戏机制，如合成表，&lt;span class=&quot;exturl&quot;&gt;&lt;a class=&quot;exturl__link&quot;   href=&quot;https://minecraft.fandom.com/wiki/Loot_table&quot; &gt;Loot table&lt;/a&gt;&lt;span class=&quot;exturl__icon&quot;&gt;&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/span&gt;等。前者由Resource packs控制，后者由Datapacks控制。&lt;/p&gt;
&lt;p&gt;在默认的mdk中，assets和data目录位于&lt;code&gt;src/main/resources&lt;/code&gt;中&lt;/p&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Forge1.18-Mod Lifecycle</title>
    <link href="https://lzmustb.github.io/2022/05/06/my-forge-learning-mod_lifecycle/"/>
    <id>https://lzmustb.github.io/2022/05/06/my-forge-learning-mod_lifecycle/</id>
    <published>2022-05-06T01:23:51.000Z</published>
    <updated>2022-05-19T00:01:12.687Z</updated>
    
    <content type="html"><![CDATA[        <h1 id="Mod-Lifecycle"   >          <a href="#Mod-Lifecycle" class="heading-link"><i class="fas fa-link"></i></a><a href="#Mod-Lifecycle" class="headerlink" title="Mod Lifecycle"></a>Mod Lifecycle</h1>      <p>在模组加载的过程中，多个生命周期事件会在mod-specific 事件总线中启动，例如物体注册，数据生成的准备，或是和其他模组的联动。</p><span id="more"></span><p>事件监听器也需要通过<code>@EventBusSubscriber(bus=Bus.MOD)</code>或在模组构造器中注册：</p><figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mod</span>.EventBusSubscriber(modid = <span class="string">&quot;mymod&quot;</span>, bus = Mod.EventBusSubscriber.Bus.MOD)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyModEventSubscriber</span> &#123;</span><br><span class="line">  <span class="meta">@SubscribeEvent</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">onCommonSetup</span><span class="params">(FMLCommonSetupEvent event)</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mod(&quot;mymod&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMod</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MyMod</span><span class="params">()</span> &#123;</span><br><span class="line">    FMLModLoadingContext.get().getModEventBus().addListener(<span class="built_in">this</span>::onCommonSetup);</span><br><span class="line">  &#125; </span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">onCommonSetup</span><span class="params">(FMLCommonSetupEvent event)</span> &#123; ... &#125;</span><br></pre></td></tr></table></div></figure><p>※模组必须保证线程安全，当调用其他模组的API时或访问原版系统时。通过<code>ParallelDispatchEvent#enqueueWork</code>可以延后执行。</p>        <h2 id="注册事件"   >          <a href="#注册事件" class="heading-link"><i class="fas fa-link"></i></a><a href="#注册事件" class="headerlink" title="注册事件"></a>注册事件</h2>      <p>注册事件有两种：<code>NewRegistryEvent</code>和<code>RegistryEvent$Register</code>。<br>前者允许模组制作者注册他们注册使用<code>RegistryBuilder</code>类创建的自定义的注册表。<br>后者用于将物体注册到注册表中。每个注册表都会启动<code>register</code>事件。<em>This event is for registering mods’ data providers to their associated data generator. This event is also fired synchronously.</em> </p>        <h2 id="数据生成（Data-Generation）"   >          <a href="#数据生成（Data-Generation）" class="heading-link"><i class="fas fa-link"></i></a><a href="#数据生成（Data-Generation）" class="headerlink" title="数据生成（Data Generation）"></a>数据生成（Data Generation）</h2>      <p>如果游戏运行data generators，<code>GatherDataEvent</code>将是最后一个启动的事件。</p>        <h2 id="Common-Setup"   >          <a href="#Common-Setup" class="heading-link"><i class="fas fa-link"></i></a><a href="#Common-Setup" class="headerlink" title="Common Setup"></a>Common Setup</h2>              <h2 id="Sided-Setup"   >          <a href="#Sided-Setup" class="heading-link"><i class="fas fa-link"></i></a><a href="#Sided-Setup" class="headerlink" title="Sided Setup"></a>Sided Setup</h2>              <h2 id="InterModComms"   >          <a href="#InterModComms" class="heading-link"><i class="fas fa-link"></i></a><a href="#InterModComms" class="headerlink" title="InterModComms"></a>InterModComms</h2>      <!--more-->]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Mod-Lifecycle&quot;   &gt;
          &lt;a href=&quot;#Mod-Lifecycle&quot; class=&quot;heading-link&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;a href=&quot;#Mod-Lifecycle&quot; class=&quot;headerlink&quot; title=&quot;Mod Lifecycle&quot;&gt;&lt;/a&gt;Mod Lifecycle&lt;/h1&gt;
      &lt;p&gt;在模组加载的过程中，多个生命周期事件会在mod-specific 事件总线中启动，例如物体注册，数据生成的准备，或是和其他模组的联动。&lt;/p&gt;</summary>
    
    
    
    <category term="游戏制作" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/"/>
    
    <category term="从零开始做mc模组" scheme="https://lzmustb.github.io/categories/%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%81%9Amc%E6%A8%A1%E7%BB%84/"/>
    
    
    <category term="编程" scheme="https://lzmustb.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
    <category term="游戏" scheme="https://lzmustb.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="Java" scheme="https://lzmustb.github.io/tags/Java/"/>
    
  </entry>
  
</feed>
